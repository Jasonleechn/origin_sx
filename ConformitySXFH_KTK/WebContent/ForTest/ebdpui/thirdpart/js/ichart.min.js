(function(h){var c=navigator.userAgent.toLowerCase(),m=function(o){return o.test(c)},j=Object.prototype.toString,d=m(/opera/),a=m(/\bchrome\b/),g=m(/webkit/),l=!a&&m(/safari/),e=!d&&m(/msie/),n=!!document.createElement("canvas").getContext,b=!g&&m(/gecko/),k=m(/ipod|ipad|iphone|android/gi),i={Linear:function(p,o,r,q){return r*p/q+o},Cubic:{easeIn:function(p,o,r,q){return r*(p/=q)*p*p+o},easeOut:function(p,o,r,q){return r*((p=p/q-1)*p*p+1)+o},easeInOut:function(p,o,r,q){if((p/=q/2)<1){return r/2*p*p*p+o}return r/2*((p-=2)*p*p+2)+o}}};var f=(function(T){var D=false,o=false,E=[],Q=(function(){if(document.addEventListener){return function(){document.removeEventListener("DOMContentLoaded",Q,false);s()}}else{if(document.attachEvent){return function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",Q);s()}}}}})(),u=function(){if(D){return}try{document.documentElement.doScroll("left")}catch(ac){setTimeout(u,1);return}s()},s=function(){if(!D){D=true;for(var ac=0;ac<E.length;ac++){E[ac].call(document)}E=[]}},R=function(){if(o){return}o=true;if(document.readyState==="complete"){return setTimeout(s,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",Q,false);T.addEventListener("load",s,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",Q);T.attachEvent("onload",s);var ac=false;try{ac=T.frameElement==null}catch(ad){}if(document.documentElement.doScroll&&ac){u()}}}},r=function(ac){R();if(D){ac.call(document,ab)
}else{E.push(function(){return ac.call(this)})}},ab=function(ac){if(!ac||ac.nodeType){return ac}if(typeof ac==="string"){if(ac.indexOf("#")!=-1){ac=ac.substring(1)}return document.getElementById(ac)}if(typeof ac==="function"){r(ac)}};ab.apply=function(ae,ad){if(ae&&ad&&typeof ad=="object"){for(var ac in ad){if(typeof ad[ac]!="undefined"){ae[ac]=ad[ac]}}}if(!ad&&ae){var af={};for(var ac in ae){af[ac]=ae[ac]}return af}return ae};ab.apply(ab,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(ad,ac){return ad===null||ad===undefined||((ab.isArray(ad)&&!ad.length))||(!ac?ad==="":false)},isArray:function(ac){return j.apply(ac)==="[object Array]"},isDate:function(ac){return j.apply(ac)==="[object Date]"},isObject:function(ac){return !!ac&&j.apply(ac)==="[object Object]"},isFunction:function(ac){return j.apply(ac)==="[object Function]"},isNumber:function(ac){return typeof ac==="number"&&isFinite(ac)},isString:function(ac){return typeof ac==="string"},isBoolean:function(ac){return typeof ac==="boolean"},isFalse:function(ac){return typeof ac==="boolean"&&!ac},isElement:function(ac){return ac?!!ac.tagName:false},isDefined:function(ac){return typeof ac!=="undefined"}});ab.applyIf=function(ae,ad){if(ae&&ab.isObject(ad)){for(var ac in ad){if(ab.isDefined(ad[ac])&&!ab.isDefined(ae[ac])){ae[ac]=ad[ac]}}}if(!ad&&ae){return ab.apply(ae)}return ae};ab.merge=function(af,ae,ad){if(af&&ab.isObject(ae)){for(var ac in ae){if(ab.isDefined(ae[ac])){if(ab.isObject(ae[ac])){if(ab.isObject(af[ac])){ab.merge(af[ac],ae[ac])
}else{af[ac]=ab.clone(ae[ac],true)}}else{af[ac]=ae[ac]}}}if(ab.isObject(ad)){return ab.merge(af,ad)}}return af};ab.clone=function(ae,ag,ad){var ah={};if(ab.isArray(ae)&&ab.isObject(ag)){for(var af=0;af<ae.length;af++){if(ad&&ab.isObject(ag[ae[af]])){ah[ae[af]]=ab.clone(ag[ae[af]],ad)}else{ah[ae[af]]=ag[ae[af]]}}}else{if(ab.isObject(ae)){for(var ac in ae){if(ag&&ab.isObject(ae[ac])&&!(ae[ac].ICHARTJS_OBJECT)){ah[ac]=ab.clone(ae[ac],ag)}else{ah[ac]=ae[ac]}}}}return ah};ab.override=function(ad,ac){if(ad&&ac){var ae=ad.prototype;ab.apply(ae,ac);if(ab.isIE&&ac.hasOwnProperty("toString")){ae.toString=ac.toString}}};ab.extend=function(){var ad=function(ae){for(var af in ae){this[af]=ae[af]}};var ac=Object.prototype.constructor;return function(ag,aj){var ae=function(){ag.apply(this,arguments)};var ah=function(){},af,ai=ag.prototype;ah.prototype=ai;af=ae.prototype=new ah();af.constructor=ae;ae.superclass=ai;if(ai.constructor==ac){ai.constructor=ag}ae.override=function(ak){ab.override(ae,ak)};af.superclass=af.supr=(function(){return ai});af.override=ad;ab.override(ae,aj);ae.extend=function(ak){return ab.extend(ae,ak)};ae.plugin_={};ae.plugin=function(al,ak){if(ab.isString(al)&&ab.isFunction(ak)){ae.plugin_[al]=ak}};return ae}}();var x=Math.sin,p=Math.cos,I=Math.atan,S=Math.tan,Y=Math.acos,M=Math.sqrt,H=Math.abs,y=Math.PI,w=2*y,G=Math.ceil,V=Math.round,t=Math.floor,C=Math.max,aa=Math.min,O=parseFloat,z={},W=function(ad,ac){if(ad==0){return ad}var af=H(ad),ae=0.1;if(af>1){while(af>1){af=af/10;
ae=ae*10}return t(ad/ae+ac)*ae}else{ae=1;while(af<1){af=af*10;ae=ae*10}return V(ad*ae+ac)/ae}},U={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},Z=function(ac){ac=ac.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3");return(ac.length==7?"rgba(":"rgb(")+parseInt(ac.substring(0,2),16)+","+parseInt(ac.substring(2,4),16)+","+parseInt(ac.substring(4,6),16)+(ac.length==7?",0."+ac.substring(6,7)+")":")")},F=function(ac){return("0"+parseInt(ac).toString(16)).slice(-2)
},J=function(ad){var ac=ad.match(/rgb\((\d+),(\d+),(\d+)\)/);return ac?("#"+F(ac[1])+F(ac[2])+F(ac[3])).toUpperCase():null},v=function(ad){var ac=/rgb\((\w*),(\w*),(\w*)\)/.exec(ad);if(ac){return new Array(ac[1],ac[2],ac[3])}ac=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(ad);if(ac){return new Array(ac[1],ac[2],ac[3],ac[4])}throw new Error("invalid colors value '"+ad+"'")},P=function(ai,ah,ad){if(ab.isArray(ai)){ah=ai[1];ad=ai[2];ai=ai[0]}ai=ai/255;ah=ah/255;ad=ad/255;var ac=C(C(ai,ah),ad),ae=aa(aa(ai,ah),ad),af=ac-ae;if(af==0){return new Array(0,0,ac)}var ag;if(ai==ac){ag=(ah-ad)/af}else{if(ah==ac){ag=(ad-ai)/af+2}else{if(ad==ac){ag=(ai-ah)/af+4}}}ag*=60;if(ag<0){ag+=360}return new Array(ag,af/ac,ac)},L=function(ac){if(!ac){return ac}ac=ac.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(ac)){return ac}if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(ac)){return ac}if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(ac)){return Z(ac)}if(U[ac]){return U[ac]}throw new Error("invalid colors value '"+ac+"'")},N=function(ag,an,al,ak){if(ab.isArray(ag)){ak=an;an=ag[1];al=ag[2];ag=ag[0]}var ac,ah,aj,af=t(ag/60)%6,ai=ag/60-af,ae=al*(1-an),ad=al*(1-an*ai),am=al*(1-an*(1-ai));switch(af){case 0:ac=al;ah=am;aj=ae;break;case 1:ac=ad;ah=al;aj=ae;break;case 2:ac=ae;ah=al;aj=am;break;case 3:ac=ae;ah=ad;aj=al;break;case 4:ac=am;ah=ae;aj=al;break;case 5:ac=al;ah=ae;aj=ad;break}return"rgb"+(ak?"a":"")+"("+V(ac*255)+","+V(ah*255)+","+V(aj*255)+(ak?","+ak+")":")")
},A=0.05,K=0.14,X=function(ac,ad){ad=ad||K;if(ac>0.5){return ad-(1-ac)/10}else{if(ac>0.1){return ad-0.16+ac/5}else{return ac>ad?ad:ac/2}}},B=function(ag,ae,ad,af){if(!ae){return ae}ae=v(L(ae));var ac=P(ae);af=af!=0?(af||A):af;ac[1]-=af;if(ag){ac[2]-=X(ac[2],ad);ac[1]=ab.upTo(ac[1],1);ac[2]=ab.lowTo(ac[2],0)}else{ac[2]+=X((1-ac[2]),ad);ac[1]=ab.lowTo(ac[1],0);ac[2]=ab.upTo(ac[2],1)}return N(ac,ae[3])},q=function(ac){if(ac==0){return 0}if(ac%w==0){return w}return ac%w};ab.apply(ab,{getFont:function(ac,ad,ae){return ac+" "+ad+"px "+ae},getDoc:function(){var ac=T.contentWindow?T.contentWindow.document:T.contentDocument?T.contentDocument:T.document;return ac},DefineAbstract:function(ad,ac){if(!ac[ad]){throw new Error("Cannot instantiate the type '"+ac.type+"'.you must implements it with method '"+ad+"'.")}},getAA:function(ac){if(ac=="linear"){return i.Linear}if(ac=="easeInOut"||ac=="easeIn"||ac=="easeOut"){return i.Cubic[ac]}return i.Linear},noConflict:function(){return f},plugin:function(ad,ac,ae){if(ab.isFunction(ad)){ad.plugin(ac,ae)}},parsePadding:function(ac,ad){ac=ac||0;if(ab.isNumber(ac)){return new Array(ac,ac,ac,ac)}if(ab.isArray(ac)){return ac}ad=ad||0;ac=ac.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");if(ac.length==1){ac[0]=ac[1]=ac[2]=ac[3]=O(ac[0])||ad}else{if(ac.length==2){ac[0]=ac[2]=O(ac[0])||ad;ac[1]=ac[3]=O(ac[1])||ad}else{if(ac.length==3){ac[0]=O(ac[0])||ad;ac[1]=ac[3]=O(ac[1])||ad;ac[2]=O(ac[2])||ad}else{ac[0]=O(ac[0])||ad;ac[1]=O(ac[1])||ad;
ac[2]=O(ac[2])||ad;ac[3]=O(ac[3])||ad}}}return ac},distanceP2P:function(ad,af,ac,ae){return M((ac-ad)*(ac-ad)+(ae-af)*(ae-af))},atan2Radian:function(ae,ad,ac,ah){if(ae==ac){if(ah>ad){return y/2}return y*3/2}if(ad==ah){if(ac>ae){return 0}return y}var ag=ab.quadrant(ae,ad,ac,ah),af=I(H((ad-ah)/(ae-ac)));return ag?(ag==3?w:y)+(ag==2?af:-af):af},angle2Radian:function(ac){return ac*y/180},radian2Angle:function(ac){return ac*180/y},quadrant:function(ae,ad,ac,af){if(ae<ac){if(ad<af){return 0}else{return 3}}else{if(ad<af){return 1}else{return 2}}},toPI2:function(ac){while(ac<0){ac+=w}return ac},visible:function(ad,af,ae){if(ad>=af){return[]}var ac=ab.quadrantd(ad),ag=ab.quadrantd(af);if((ac==2||ac==3)&&(ag==2||ag==3)&&((af-ad)<y)){return[]}ad=ab.toPI2(ad);af=ab.toPI2(af);if(af<=ad){af+=w}if(ad>y){ad=w}else{if(af>w){return[{s:ad,e:y,f:ae},{s:w,e:af,f:ae}]}else{if(af>y){af=y}}}return{s:ad,e:af,f:ae}},quadrantd:function(ac){if(ac==0){return 0}if(ac%w==0){return 3}while(ac<0){ac+=w}return G(2*(ac%w)/y)-1},upTo:function(ad,ac){return ac>ad?ad:ac},lowTo:function(ac,ad){return ad<ac?ac:ad},between:function(ac,ae,ad){return ac>ae?ab.between(ae,ac,ad):(ad>ae?ae:ad<ac?ac:ad)},inRange:function(ac,ae,ad){return ae>ad&&ac<ad},angleInRange:function(ac,ae,ad){ad=(ad-ac);ad=ad<0?ad+w:ad;ad=ad%w;return(ae-ac)>ad},angleZInRange:function(ac,ae,ad){return ae>ac?ae>ad&&ac<ad:(ad>ac||ad<ae)},inRangeClosed:function(ac,ae,ad){return ae>=ad&&ac<=ad},inEllipse:function(ad,af,ae,ac){return(ad*ad/ae/ae+af*af/ac/ac)<=1
},p2Point:function(ac,af,ad,ae){return{x:ac+p(ad)*ae,y:af+x(ad)*ae}},toRgb:L,toRgba:function(ae,ad){var ac=v(L(ae));return"rgba("+ac[0]+","+ac[1]+","+ac[2]+","+ad+")"},vectorP2P:function(ac,ae,ad){if(!ad){ae=ab.angle2Radian(ae);ac=ab.angle2Radian(ac)}ae=x(ae);return{x:ae*x(ac),y:ae*p(ac)}},uid:function(ac){return(ac||"ichartjs")+"_"+G(Math.random()*10000)+new Date().getTime().toString().substring(4)},register:function(ad){var ac=ad.get("id");if(!ac||ac==""){ac=ab.uid(ad.type);while(z[ac]){ac=ab.uid(ad.type)}ad.push("id",ac)}if(z[ac]){throw new Error("exist reduplicate id :"+ac)}ad.id=ac;z[ac]=ad},get:function(ac){return z[ac]},parsePercent:function(ac,ad){if(ab.isString(ac)){ac=ac.match(/(.*)%/);if(ac){ac=ad?t(O(ac[1])*ad/100):ac[1]/100}}return(!ac||ac<=0||ac>ad)?ad:ac},parseFloat:function(ac,ad){if(!ab.isNumber(ac)){ac=O(ac);if(!ab.isNumber(ac)){throw new Error("["+ad+"]="+ac+"is not a valid number.")}}return ac},ceil:function(ac){return W(ac,1)},floor:function(ac,ad){return W(ac,-1)},_2D:"2d",_3D:"3d",light:function(ad,ac,ae){return B(false,ad,ac,ae)},dark:function(ad,ac,ae){return B(true,ad,ac,ae)},fixPixel:function(ac){return ab.isNumber(ac)?ac:O(ac.replace("px",""))||0},toPixel:function(ac){return ab.isNumber(ac)?ac+"px":ab.fixPixel(ac)+"px"},emptyFn:function(){return true},supportCanvas:n,isOpera:d,isWebKit:g,isChrome:a,isSafari:l,isIE:e,isGecko:b,isMobile:k,touch:"ontouchend" in document,FRAME:k?30:60});ab.Assert={isTrue:function(ac,ad){if(ac!==true){throw new Error(ad)
}}};ab.requestAnimFrame=(function(){var ac=T.requestAnimationFrame||T.webkitRequestAnimationFrame||T.mozRequestAnimationFrame||T.oRequestAnimationFrame||T.msRequestAnimationFrame||function(ad){T.setTimeout(ad,1000/60)};return function(ad){ac(ad)}})();ab.Event={addEvent:function(af,ae,ad,ac){if(af.addEventListener){af.addEventListener(ae,ad,ac)}else{if(af.attachEvent){af.attachEvent("on"+ae,ad)}else{af["on"+ae]=ad}}},fix:function(ah){if(typeof(ah)=="undefined"){ah=T.event}var ae={target:ah.target,pageX:ah.pageX,pageY:ah.pageY,offsetX:ah.offsetX,offsetY:ah.offsetY,stopPropagation:false,event:ah};if(typeof(ah.offsetX)=="undefined"){if(!ah.target){ae.target=ah.srcElement||document}if(ah.targetTouches){ae.pageX=ah.targetTouches[0].pageX;ae.pageY=ah.targetTouches[0].pageY}if(ae.pageX==null&&ah.clientX!=null){var ag=document.documentElement,ad=document.body;ae.pageX=ah.clientX+(ag&&ag.scrollLeft||ad&&ad.scrollLeft||0)-(ag&&ag.clientLeft||ad&&ad.clientLeft||0);ae.pageY=ah.clientY+(ag&&ag.scrollTop||ad&&ad.scrollTop||0)-(ag&&ag.clientTop||ad&&ad.clientTop||0)}var ac=0,ai=0,af=ah.target;while(af!=document.body&&af){ac+=af.offsetLeft;ai+=af.offsetTop;af=af.offsetParent}ae.offsetX=ae.pageX-ac;ae.offsetY=ae.pageY-ai}ae.x=ae.offsetX;ae.y=ae.offsetY;if(!ah.stopPropagation){ah.stopPropagation=function(){T.event.cancelBubble=true}}return ae}};return ab})(h);Array.prototype.each=function(u,q){var o=this.length,t;for(var p=0;p<o;p++){t=q?u.call(q,this[p],p):u(this[p],p);if(typeof t==="boolean"&&!t){break
}}return this};Array.prototype.eachAll=function(p,o){this.each(function(r,q){if(f.isArray(r)){return r.eachAll(p,o)}else{return o?p.call(o,r,q):p(r,q)}},o)};Array.prototype.sor=function(t){var r=this,o=r.length-1,q;for(var s=0;s<o;s++){for(var p=o;p>s;p--){if(t?!t(r[p],r[p-1]):(r[p]<r[p-1])){q=r[p];r[p]=r[p-1];r[p-1]=q}}}};h.iChart=f;if(!h.$){h.$=h.iChart}})(window);(function(a){iChart.Element=function(c){var b=this._();b.type="element";b.ICHARTJS_OBJECT=true;iChart.DefineAbstract("configure",b);iChart.DefineAbstract("afterConfiguration",b);b.options={};b.set({border:{enable:false,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:false,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};b.registerEvent("initialize");b.initialization=false;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=iChart.clone(b.options,true);b.set(c);b.afterConfiguration(b)};iChart.Element.prototype={_:function(){return this},afterConfiguration:function(b){if(iChart.isObject(b.get("listeners"))){for(var c in b.get("listeners")){b.on(c,b.get("listeners")[c])}}b.initialize();b.fireEvent(b,"initialize",[b])},registerEvent:function(){for(var b=0;b<arguments.length;b++){this.events[arguments[b]]=[]}},fireString:function(f,c,b,e){var d=this.fireEvent(f,c,b);
return iChart.isString(d)?d:(d!==true&&iChart.isDefined(d)?d.toString():e)},fireEvent:function(g,d,c){var b=this.events[d].length;if(b==1){return this.events[d][0].apply(g,c)}var f=true;for(var e=0;e<b;e++){if(!this.events[d][e].apply(g,c)){f=false}}return f},on:function(c,b){if(iChart.isString(c)&&iChart.isArray(this.events[c])){this.events[c].push(b)}else{if(iChart.isArray(c)){c.each(function(d){this.on(d,b)},this)}}return this},getPlugin:function(b){return this.constructor.plugin_[b]},set:function(b){if(iChart.isObject(b)){iChart.merge(this.options,b)}},pushIf:function(c,b){if(!iChart.isDefined(this.get(c))||this.get(c)==null){return this.push(c,b)}return this.get(c)},push:function(g,e){var c=g.split("."),b=c.length-1,d=this.options;for(var f=0;f<b;f++){if(!d[c[f]]){d[c[f]]={}}d=d[c[f]]}d[c[b]]=e;return e},get:function(e){var b=e.split("."),c=this.options[b[0]];for(var d=1;d<b.length;d++){if(!c){return null}c=c[b[d]]}return c}};iChart.Painter=iChart.extend(iChart.Element,{configure:function(){this.type="painter";this.dimension=iChart._2D;iChart.DefineAbstract("commonDraw",this);iChart.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:true},gradient:false,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null});this.variable.event={mouseover:false};this.variable.animation={};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")
},is3D:function(){return this.dimension==iChart._3D},applyGradient:function(b,f,c,e){var d=this._();if(d.get("gradient")&&d.get("f_color")){d.push("f_color",d.T.gradient(b||d.x||0,f||d.y||0,c||d.get(d.W),e||d.get(d.H),[d.get("dark_color"),d.get("light_color")],d.get("gradient_mode")));d.push("light_color",d.T.gradient(b||d.x||0,f||d.y||0,c||d.get(d.W),e||d.get(d.H),[d.get("background_color"),d.get("light_color")],d.get("gradient_mode")));d.push("f_color_",d.get("f_color"))}},draw:function(c,b){if(b){this.root.draw(c)}else{if(!this.fireEvent(this,"beforedraw",[this,c])){return this}this.commonDraw(this,c);this.fireEvent(this,"draw",[this,c])}},inject:function(b){if(b){this.root=b;this.target=this.T=b.T}},doConfig:function(){var d=this._(),k=iChart.parsePadding(d.get("padding")),c=d.get("border.enable"),c=c?iChart.parsePadding(d.get("border.width")):[0,0,0,0],e=iChart.toRgb(d.get("background_color")),j=d.get("color_factor"),h=d.get("gradient")?0:null;d.set({border_top:c[0],border_right:c[1],border_bottom:c[2],border_left:c[3],hborder:c[1]+c[3],vborder:c[0]+c[2],padding_top:k[0]+c[0],padding_right:k[1]+c[1],padding_bottom:k[2]+c[2],padding_left:k[3]+c[3],hpadding:k[1]+k[3]+c[1]+c[3],vpadding:k[0]+k[2]+c[0]+c[2]});if(d.get("shadow")===true){d.push("shadow",{color:d.get("shadow_color"),blur:d.get("shadow_blur"),offsetx:d.get("shadow_offsetx"),offsety:d.get("shadow_offsety")})}d.push("f_color",e);d.push("f_color_",e);d.push("light_color",iChart.light(e,j,h));d.push("dark_color",iChart.dark(e,j*0.8,h));
d.push("light_color2",iChart.light(e,j*2,h));if(d.is3D()&&!d.get("xAngle_")){var i=iChart.vectorP2P(d.get("xAngle"),d.get("yAngle"));d.push("xAngle_",i.x);d.push("yAngle_",i.y)}}});iChart.Html=iChart.extend(iChart.Element,{configure:function(b){this.type="html";this.T=b;iChart.DefineAbstract("beforeshow",this);this.set({animation:true,default_action:true,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){var b=this._();b.wrap=b.get("wrap");b.dom=document.createElement("div");if(b.get("shadow")){b.css("boxShadow",b.get("shadow_offsetx")+"px "+b.get("shadow_offsety")+"px "+b.get("shadow_blur")+"px "+b.get("shadow_color"))}if(b.get("border.enable")){b.css("border",b.get("border.width")+"px "+b.get("border.style")+" "+b.get("border.color"));b.css("borderRadius",b.get("border.radius")+"px")}b.css("position","absolute");b.css("zIndex",b.get("index"));b.applyStyle();b.wrap.appendChild(b.dom);b.style=b.dom.style;if(b.get("default_action")){b.doAction(b)}},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(d,b){var c="transitionend";if(iChart.isWebKit){c="webkitTransitionEnd"}else{if(iChart.isOpera){c="oTransitionEnd"}}iChart.Event.addEvent(this.dom,c,d,b)},destroy:function(){this.wrap.removeChild(this.dom)},transition:function(b){this.transitions=this.transitions==""?b:this.transitions+","+b;if(iChart.isWebKit){this.css("WebkitTransition",this.transitions)}else{if(iChart.isGecko){this.css("MozTransition",this.transitions)
}else{if(iChart.isOpera){this.css("OTransition",this.transitions)}else{this.css("transition",this.transitions)}}}},beforeshow:function(d,b,c){c.follow(d,b,c)},show:function(c,b){this.beforeshow(c,b,this);this.css("visibility","visible");if(this.get("animation")){this.css("opacity",1)}},hidden:function(b){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(c,b){if(iChart.isString(c)){if(iChart.isDefined(b)){this.dom.style[c]=b}else{return this.dom.style[c]}}},applyStyle:function(){var d=this.get("style").split(";"),c;for(var b=0;b<d.length;b++){c=d[b].split(":");if(c.length>1){this.css(c[0],c[1])}}}});iChart.Component=iChart.extend(iChart.Painter,{configure:function(b){iChart.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",tip:{enable:false,border:{width:2}}});this.atomic=false;this.proxy=false;this.ICHARTJS_CHART=false;this.inject(b)},initialize:function(){iChart.DefineAbstract("isEventValid",this);iChart.DefineAbstract("doDraw",this);this.doConfig();this.initialization=true},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){if(this.tip){this.tip.destroy()}},doConfig:function(){iChart.Component.superclass.doConfig.call(this);var b=this._();b.x=b.push(b.X,b.get(b.X)+b.get("offsetx"));b.y=b.push(b.Y,b.get(b.Y)+b.get("offsety"));b.push("fontStyle",iChart.getFont(b.get("fontweight"),b.get("fontsize"),b.get("font")));
b.data=b.get("data");if(b.get("tip.enable")){b.pushIf("tip.border.color",b.get("f_color"));if(!iChart.isFunction(b.get("tip.invokeOffset"))){b.push("tip.invokeOffset",b.tipInvoke())}}},isMouseOver:function(b){return this.isEventValid(b,this)},redraw:function(b){this.root.draw(b,this.root.Combination)},commonDraw:function(b){if(!b.proxy){b.doDraw.call(b,b)}}});iChart.Tip=iChart.extend(iChart.Html,{configure:function(){iChart.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:false,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:true,radius:5},delay:200});this.registerEvent("parseText")},position:function(d,b,c){c.style.top=(d<0?0:d)+"px";c.style.left=(b<0?0:b)+"px"},follow:function(d,b,c){if(c.get("invokeOffsetDynamic")){if(b.hit){if(iChart.isString(b.text)||iChart.isNumber(b.text)){c.text(b.name,b.value,b.text,b.i,c)}var f=c.get("invokeOffset")(c.width(),c.height(),b);c.position(f.top,f.left,c)}}else{if(c.get("showType")!="follow"&&iChart.isFunction(c.get("invokeOffset"))){var f=c.get("invokeOffset")(c.width(),c.height(),b);c.position(f.top,f.left,c)}else{c.position((d.y-c.height()*1.1-2),d.x+2,c)}}},text:function(f,b,e,d,c){c.dom.innerHTML=c.fireString(c,"parseText",[c,f,b,e,d],e)},hidden:function(b){if(this.get("animation")){this.css("opacity",0)
}else{this.css("visibility","hidden")}},doAction:function(b){b.T.on("mouseover",function(g,f,d){b.show(f,d)}).on("mouseout",function(g,f,d){b.hidden(f)});if(b.get("showType")=="follow"){b.T.on("mousemove",function(g,f,d){if(b.T.variable.event.mouseover){setTimeout(function(){if(b.T.variable.event.mouseover){b.follow(f,d,b)}},b.get("delay"))}})}},initialize:function(){iChart.Tip.superclass.initialize.call(this);var c=this._();c.text(c.get("name"),c.get("value"),c.get("text"),0,c);c.hidden();if(c.get("animation")){var b=c.get("move_duration")/1000+"s "+c.get("timing_function")+" 0s";c.transition("opacity "+c.get("fade_duration")/1000+"s "+c.get("timing_function")+" 0s");c.transition("top "+b);c.transition("left "+b);c.onTransitionEnd(function(d){if(c.css("opacity")==0){c.css("visibility","hidden")}},false)}}});iChart.CrossHair=iChart.extend(iChart.Html,{configure:function(){iChart.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:true,vcross:true,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(d,b,c){if(c.get("invokeOffset")){var f=c.get("invokeOffset")(d,b);if(f&&f.hit){c.o_valid=true;c.position(f.top-c.top,f.left-c.left,c)}else{if(!f||!c.o_valid){c.position(c.owidth,c.oheight,c)}}}else{c.position(d.y-c.top-1,d.x-c.left-1,c)}},position:function(d,b,c){c.horizontal.style.top=(d-c.size)+"px";c.vertical.style.left=(b-c.size)+"px"},doCreate:function(c,b,e){var f=document.createElement("div");f.style.width=iChart.toPixel(b);
f.style.height=iChart.toPixel(e);f.style.backgroundColor=c.get("line_color");f.style.position="absolute";c.dom.appendChild(f);return f},doAction:function(b){b.T.on("mouseover",function(g,f,d){b.show(f,d)}).on("mouseout",function(g,f,d){b.hidden(f,d)}).on("mousemove",function(g,f,d){b.follow(f,d,b)})},initialize:function(){iChart.CrossHair.superclass.initialize.call(this);var c=this._(),b=iChart.toPixel(c.get("line_width"));c.size=c.get("line_width")/2;c.top=iChart.fixPixel(c.get(c.O));c.left=iChart.fixPixel(c.get(c.L));c.owidth=-c.T.root.width;c.oheight=-c.T.root.height;c.o_valid=false;c.css("width","0px");c.css("height","0px");c.css("top",c.top+"px");c.css("left",c.left+"px");c.css("visibility","hidden");c.horizontal=c.doCreate(c,c.get("hcross")?iChart.toPixel(c.get(c.W)):"0px",b);c.vertical=c.doCreate(c,b,c.get("vcross")?iChart.toPixel(c.get(c.H)):"0px")}});iChart.Legend=iChart.extend(iChart.Component,{configure:function(){iChart.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:undefined,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:false,align:"right",valign:"middle"});this.atomic=true;this.registerEvent("parse")},isEventValid:function(d,b){var c={valid:false};if(d.x>this.x&&d.x<(b.x+b.width)&&d.y>b.y&&d.y<(b.y+b.height)){b.data.each(function(f,e){if(d.x>f.x&&d.x<(f.x+f.width_+b.get("signwidth"))&&d.y>f.y&&d.y<(f.y+b.get("line_height"))){c={valid:true,index:e,target:f};
return false}},b)}return c},drawCell:function(b,j,h,c,i,d){var e=d.get("sign_size"),g=d.getPlugin("sign");if(!g||!g.call(d,d.T,i,b+e/2,j,e,c)){if(i.indexOf("bar")!=-1){d.T.box(b,j-e/12,e,e/6,0,c)}if(i=="round"){d.T.round(b+e/2,j,e/2,c)}else{if(i=="round-bar"){d.T.round(b+e/2,j,e/4,c)}else{if(i=="square-bar"){d.T.box(b+e/4,j-e/4,e/2,e/2,0,c)}else{if(i=="square"){d.T.box(b,j-e/2,e,e,0,c)}}}}}d.T.fillText(h,b+d.get("signwidth"),j,0,d.get("text_with_sign_color")?c:d.get("color"),"lr",d.get("line_height"))},doDraw:function(b){b.T.box(b.x,b.y,b.width,b.height,b.get("border"),b.get("f_color"),false,b.get("shadow"));b.T.textStyle(b.L,"middle",iChart.getFont(b.get("fontweight"),b.get("fontsize"),b.get("font")));b.data.each(function(c){b.drawCell(c.x,c.y,c.text,c.color,c.sign,b)})},doLayout:function(E,z){var q=E.get("sign_size"),m=0,v=0,B=0,D=E.get("column"),n=E.get("row"),e=E.data.length;E.T.textFont(E.get("fontStyle"));if(E.get("line_height")<q){E.push("line_height",q+q/5)}E.push("signwidth",(q+E.get("sign_space")));E.data.each(function(c){c.width_=E.T.measureText(c.text)},E);for(var u=0;u<D;u++){B=0;for(var t=u;t<e;t+=D){B=Math.max(B,E.data[t].width_)}E.columnwidth[u]=B;m+=B}for(var u=0;u<n;u++){B=0;for(var t=u*D;t<e;t++){B=Math.max(B,E.data[t].text.split("\n").length)}E.columnheight[u]=B;v+=B}m=E.push(E.W,m+E.get("hpadding")+E.get("signwidth")*D+(D-1)*E.get("legend_space"));if(m>E.get("maxwidth")){var A=E.get("maxwidth")/m,s=iChart.lowTo,p=Math.floor;E.push("fontsize",s(6,p(E.get("fontsize")*A)));
E.push("sign_size",s(6,p(q*A)));E.push("sign_space",s(4,p(E.get("sign_space")*A)));E.push("legend_space",s(4,p(E.get("legend_space")*A)));E.push("fontStyle",iChart.getFont(E.get("fontweight"),E.get("fontsize"),E.get("font")));E.doLayout(E,z);return}var C,l,k,b;E.width=m;E.height=v=E.push(E.H,v*E.get("line_height")+E.get("vpadding"));if(E.get("valign")==E.O){E.y=z.get("t_originy")}else{if(E.get("valign")==E.B){E.y=z.get("b_originy")-v}else{E.y=z.get("centery")-v/2}}if(E.get("align")==E.L){E.x=z.get("l_originx")}else{if(E.get("align")==E.C){E.x=z.get("centerx")-m/2}else{E.x=z.get("r_originx")-m}}E.x=E.push(E.X,E.x+E.get("offsetx"));E.y=E.push(E.Y,E.y+E.get("offsety"));k=E.y+E.get("padding_top");q=E.get("legend_space")+E.get("signwidth");for(var u=0;u<n;u++){l=E.x+E.get("padding_left");b=(E.columnheight[u]/2)*E.get("line_height");k+=b;for(var t=0;t<D&&u*D+t<e;t++){C=E.data[u*D+t];C.y=k;C.x=l;l+=E.columnwidth[t]+q}k+=b}},doConfig:function(){iChart.Legend.superclass.doConfig.call(this);var d=this._(),f=d.root,h=iChart.isNumber(d.get("column")),e=iChart.isNumber(d.get("row")),b=d.data.length;if(d.get("align")==d.C&&d.get("valign")=="middle"){d.push("valign",d.O)}if(f.get("align")==d.L){if(d.get("valign")=="middle"){d.push("align",d.R)}}d.data.each(function(g,c){iChart.merge(g,d.fireEvent(d,"parse",[d,g.name,c]));g.text=g.text||g.name;g.sign=g.sign||d.get("sign")},d);if(!h&&!e){h=d.push("column",1)}if(h&&!e){e=d.push("row",Math.ceil(b/d.get("column")))}if(!h&&e){h=d.push("column",Math.ceil(b/d.get("row")))
}h=d.get("column");e=d.get("row");if(b>e*h){e+=Math.ceil((b-e*h)/h);e=d.push("row",e)}d.columnwidth=new Array(h);d.columnheight=new Array(e);d.doLayout(d,f)}});iChart.Label=iChart.extend(iChart.Component,{configure:function(){iChart.Label.superclass.configure.apply(this,arguments);this.type="label";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:false});this.atomic=true;this.registerEvent()},isEventValid:function(c,b){return{valid:iChart.inRange(b.labelx,b.labelx+b.get(b.W),c.x)&&iChart.inRange(b.labely,b.labely+b.get(b.H),c.y)}},text:function(b){if(b){this.push("text",b)}this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(d){var e=d.get("quadrantd"),f=d.get("line_points"),c=d.get("smooth"),e=(e>=1&&e<=2),b=d.get("labelx"),g=d.get("labely");d.labelx=b+(e?-d.get(d.W)-c:c);d.labely=g-d.get(d.H)/2;f[2]={x:b,y:g};f[3]={x:f[2].x+(e?-c:c),y:f[2].y}},doLayout:function(b,e,d,c){c.push("labelx",c.get("labelx")+b/d);c.push("labely",c.get("labely")+e/d);c.get("line_points").each(function(g,f){g.x+=b;g.y+=e;return f==1},c);c.localizer(c)},doDraw:function(d){var f=d.get("line_points"),e=d.get("sign_size"),c=d.labelx+d.get("padding_left"),g=d.labely+d.get("padding_top");d.T.label(f,d.get("line_thickness"),d.get("border.color"));d.T.box(d.labelx,d.labely,d.get(d.W),d.get(d.H),d.get("border"),d.get("f_color"),false,d.get("shadow"));
d.T.textStyle(d.L,d.O,d.get("fontStyle"));var b=d.get("color");if(d.get("text_with_sign_color")){b=d.get("scolor")}if(d.get("sign")=="square"){d.T.box(c,g,e,e,0,d.get("scolor"))}else{if(d.get("sign")){d.T.round(c+e/2,g+e/2,e/2,d.get("scolor"))}}d.T.fillText(d.get("text"),c+e+d.get("sign_space"),g,d.get("textwidth"),b)},doConfig:function(){iChart.Label.superclass.doConfig.call(this);var b=this._();b.T.textFont(b.get("fontStyle"));if(b.get("fontsize")>b.get("line_height")){b.push("line_height",b.get("fontsize"))}if(!b.get("sign")){b.push("sign_size",0);b.push("sign_space",0)}b.push(b.H,b.get("line_height")+b.get("vpadding"));b.text();b.localizer(b)}});iChart.Text=iChart.extend(iChart.Component,{configure:function(){iChart.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:false},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(b){if(b.get("box_feature")){b.T.box(b.x,b.y,b.get(b.W),b.get(b.H),b.get("border"),b.get("f_color"))}b.T.text(b.get("text"),b.get("textx"),b.get("texty"),b.get(b.W),b.get("color"),b.get("textAlign"),b.get("textBaseline"),b.get("fontStyle"),b.get("writingmode"),b.get("line_height"),b.get("shadow"),b.get("rotate"))},isEventValid:function(){return{valid:false}},doLayout:function(b,e,d,c){c.x=c.push(c.X,c.x+b);c.y=c.push(c.Y,c.y+e);c.push("textx",c.get("textx")+b);c.push("texty",c.get("texty")+e)},doConfig:function(){iChart.Text.superclass.doConfig.call(this);
var e=this._(),b=e.x,g=e.y+e.get("padding_top"),d=e.get(e.W),f=e.get(e.H),c=e.get("textAlign");b+=(c==e.C?d/2:(c==e.R?d-e.get("padding_right"):e.get("padding_left")));if(f){g+=f/2;e.push("textBaseline","middle")}e.push("textx",b);e.push("texty",g);e.push("box_feature",d&&f);e.applyGradient()}});(function(g){var q=Math.PI,c=q/90,n=c/2,o=Math.ceil,h=Math.floor,l=2*q,j=Math.max,f=Math.min,i=Math.sin,m=Math.cos,b=function(r,s){return r==1?(h(s)+0.5):Math.round(s)},k=function(v,F,w,u){var D=F.x,B=F.y,z=v[w-1],G=v[w+1],E,C,t,s;if(w<v.length-1){var r=z.y,H=G.y,A;E=(u*D+z.x)/(u+1);C=(u*B+r)/(u+1);t=(u*D+G.x)/(u+1);s=(u*B+H)/(u+1);A=((s-C)*(t-D))/(t-E)+B-s;C+=A;s+=A;if(C>r&&C>B){C=j(r,B);s=2*B-C}else{if(C<r&&C<B){C=f(r,B);s=2*B-C}}if(s>H&&s>B){s=j(H,B);C=2*B-s}else{if(s<H&&s<B){s=f(H,B);C=2*B-s}}F.rcx=t;F.rcy=s}return[z.rcx||z.x,z.rcy||z.y,E||D,C||B,D,B]},p=function(r){return iChart.isNumber(r)?r:iChart.parseFloat(r,r)},e=function(A,C){var y,u=0,t,D=0,F=false,x=C.get("labels");C.data=A;if(C.dataType=="simple"){C.total=0;A.each(function(I,H){I.background_color=I.color;u=I.value;if(iChart.isArray(u)){var G=0;D=u.length>D?u.length:D;for(var r=0;r<u.length;r++){u[r]=p(u[r]);G+=u[r];if(!F){y=t=u[r];F=true}y=j(u[r],y);t=f(u[r],t)}I.total=G}else{u=p(u);I.value=u;C.total+=u;if(!F){y=t=u;F=true}y=j(u,y);t=f(u,t)}},C);if(iChart.isArray(x)){D=x.length>D?x.length:D}C.push("maxItemSize",D)}else{if(C.dataType=="stacked"||C.dataType=="complex"){var z=x.length,E,v,s,B=C.dataType=="stacked";if(z==0){z=A[0].value.length;
for(var w=0;w<z;w++){x.push("")}}C.columns=[];for(var w=0;w<z;w++){E=[],v=0;A.each(function(G,r){u=G.value[w];if(!u){return}G.value[w]=u=p(u,u);v+=u;if(B){s=A[r].color}else{s=G.color;if(!F){y=t=u;F=true}y=j(u,y);t=f(u,t)}E.push({name:G.name,value:G.value[w],background_color:s,color:s})});if(B){if(!F){y=t=u;F=true}y=j(v,y);t=f(v,t)}C.columns.push({total:v,name:x[w],item:E})}}}C.push("minValue",t);C.push("maxValue",y);C.doConfig();C.initialization=true};function d(r){if(typeof r==="string"){r=g(r)}if(!r||!r.tagName||r.tagName.toLowerCase()!="canvas"){throw new Error("there not a canvas element")}this.canvas=r;this.c=this.canvas.getContext("2d")}d.prototype={getContext:function(){return this.c},css:function(r,t){if(iChart.isDefined(t)){this.canvas.style[r]=t}else{return this.canvas.style[r]}},ellipse:function(E,B,D,C,I,w,z,r,v,u,F,H,A,G){var t=I,A=!!A;this.save().gCo(G).strokeStyle(r,v,u).shadowOn(F).fillStyle(z).moveTo(E,B).beginPath();if(A){this.moveTo(E,B)}while(t<=w){this.lineTo(E+D*m(t),B+(C*i(t)));t+=c}return this.lineTo(E+D*m(w),B+(C*i(w))).closePath().stroke(r).fill(z).restore()},arc:function(E,C,t,u,I,w,z,D,B,v,F,H,A,G){if(!t){return this}this.save().gCo(G).strokeStyle(D,B,v).fillStyle(z).beginPath();if(D){t-=h(B/2)}if(u){this.moveTo(E+m(I)*(t-u),C+i(I)*(t-u)).lineTo(E+m(I)*t,C+i(I)*t);this.c.arc(E,C,t,I,w,H);this.lineTo(E+m(w)*(t-u),C+i(w)*(t-u));this.c.arc(E,C,t-u,w,I,!H)}else{this.c.arc(E,C,t,I,w,H);if(A){this.lineTo(E,C)}}this.closePath();if(!D){this.shadowOn(F).fill(z)
}else{this.shadowOn(F).stroke(D).shadowOff().fill(z)}return this.restore()},sector:function(F,D,t,u,I,A,B,E,C,z,G,H,w,v){if(G){this.arc(F,D,t,u,I,A,B,E,C,z,G,H,!w,!v)}return this.arc(F,D,t,u,I,A,B,E,C,z,false,H,!w)},sector3D:function(){var u,v,s=function(H,E,G,F,J,B,I,A,C){var D=function(x,y){this.lineTo(H+G*m(x),E+(y||0)+(F*i(x)))},z=J;this.fillStyle(iChart.dark(C)).moveTo(H+G*m(J),E+(F*i(J))).beginPath();while(z<=B){D.call(this,z);z=z+c}D.call(this,B);this.lineTo(H+G*m(B),(E+A)+(F*i(B)));z=B;while(z>=J){D.call(this,z,A);z=z-c}D.call(this,J,A);this.lineTo(H+G*m(J),E+(F*i(J))).closePath().fill(true)},r=function(H,E,G,F,J,C,B,D){var z=H+G*m(B);var I=E+C+(F*i(B));this.moveTo(H,E).beginPath().fillStyle(D).lineTo(H,E+C).lineTo(z,I).lineTo(z,I-C).lineTo(H,E).closePath().fill(true)},w=function(H,E,G,F,J,C,I,z,D){var B=iChart.quadrantd(J),A=iChart.quadrantd(C);D=iChart.dark(D);if(B==1||B==2){r.call(this,H,E,G,F,I,z,J,D)}if(A==0||A==3){r.call(this,H,E,G,F,I,z,C,D)}};var t=function(J,G,I,H,M,D,B,F,z,C,A,K,L,E){this.ellipse(J,G+B,I,H,M,D,F,z,C,A,K,L,true);w.call(this,J,G,I,H,M,D,L,B,F);this.ellipse(J,G,I,H,M,D,F,z,C,A,false,L,true);s.call(this,J,G,I,H,M,D,L,B,F);return this};t.layerPaint=w;t.sPaint=s;t.layerDraw=r;return t}(),textStyle:function(s,r,t){return this.textAlign(s).textBaseline(r).textFont(t)},strokeStyle:function(r,s,u,t){if(r){if(s){this.c.lineWidth=s}if(u){this.c.strokeStyle=u}if(t){this.c.lineJoin=t}}return this},globalAlpha:function(r){if(r){this.c.globalAlpha=r}return this
},fillStyle:function(r){if(r){this.c.fillStyle=r}return this},arc2:function(t,A,v,u,w,z){if(v){this.c.arc(t,A,v,u,w,z)}return this},textAlign:function(r){if(r){this.c.textAlign=r}return this},textBaseline:function(r){if(r){this.c.textBaseline=r}return this},textFont:function(r){if(r){this.c.font=r}return this},shadowOn:function(r){if(r){this.c.shadowColor=r.color;this.c.shadowBlur=r.blur;this.c.shadowOffsetX=r.offsetx;this.c.shadowOffsetY=r.offsety}return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(C,B,E,v,A,u,s){u=u.toLowerCase();var t=C,D=B,z=!u.indexOf("linear");u=u.substring(14);if(z){switch(u){case"updown":D+=v;break;case"downup":B+=v;break;case"leftright":t+=E;break;case"rightleft":C+=E;break;default:return A[0]}return this.avgLinearGradient(C,B,t,D,A)}else{C+=E/2;B+=v/2;return this.avgRadialGradient(C,B,(s||0),C,B,(E>v?v:E),u=="outin"?A.reverse():A)}},avgLinearGradient:function(r,t,v,w,x){var u=this.createLinearGradient(r,t,v,w);for(var s=0;s<x.length;s++){u.addColorStop(s/(x.length-1),x[s])}return u},createLinearGradient:function(r,s,t,u){return this.c.createLinearGradient(r,s,t,u)},avgRadialGradient:function(r,y,s,x,u,z,w){var v=this.createRadialGradient(r,y,s,x,u,z);for(var t=0;t<w.length;t++){v.addColorStop(t/(w.length-1),w[t])}return v},createRadialGradient:function(s,u,r,v,w,t){return this.c.createRadialGradient(s,u,r,v,w,t)},text:function(E,C,A,B,s,z,F,r,w,u,D,v){return this.save().textStyle(z,F,r).fillText(E,C,A,B,s,w,u,D,v).restore()
},fillText:function(D,B,z,A,s,w,u,C,v){D=D.toString();if(!D||!D.length){return this}A=A||false;w=w||"lr";u=u||16;var r=D.split(w=="tb"?"":"\n");if(r.length>1){if(this.c.textBaseline=="middle"){z=z-(r.length-1)*u/2}else{if(this.c.textBaseline=="bottom"){z=z-(r.length-1)*u}}}this.save().fillStyle(s).translate(B,z).rotate(n*v).shadowOn(C);r.each(function(y,x){try{if(A){this.c.fillText(y,0,x*u,A)}else{this.c.fillText(y,0,x*u)}}catch(E){console.log(E.message+"["+y+","+B+","+z+"]")}},this);return this.restore()},measureText:function(s){s=s.split("\n");var r=0;s.each(function(t){r=j(this.measureText(t).width,r)},this.c);return r},moveTo:function(r,s){r=r||0;s=s||0;this.c.moveTo(r,s);return this},lineTo:function(r,s){r=r||0;s=s||0;this.c.lineTo(r,s);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(r){if(r){this.c.stroke()}return this},fill:function(r){if(r){this.c.fill()}return this},cube:function(E,B,t,D,s,G,u,v,A,z,w,F){E=b(z,E);B=b(z,B);u=(u&&u>0)?u:s;var r=E+u*t,C=B-u*D;r=b(z,r);C=b(z,C);if(F){this.polygon(v,A,z,w,F,false,[{x:E,y:B},{x:r,y:C},{x:r+s,y:C},{x:E+s,y:B}]);this.polygon(v,A,z,w,F,false,[{x:E,y:B},{x:E,y:B+G},{x:E+s,y:B+G},{x:E+s,y:B}]);this.polygon(v,A,z,w,F,false,[{x:E+s,y:B},{x:r+s,y:C},{x:r+s,y:C+G},{x:E+s,y:B+G}])}this.polygon(iChart.dark(v),A,z,w,false,false,[{x:E,y:B},{x:r,y:C},{x:r+s,y:C},{x:E+s,y:B}]);
this.polygon(v,A,z,w,false,false,[{x:E,y:B},{x:E,y:B+G},{x:E+s,y:B+G},{x:E+s,y:B}]);this.polygon(iChart.dark(v),A,z,w,false,false,[{x:E+s,y:B},{x:r+s,y:C},{x:r+s,y:C+G},{x:E+s,y:B+G}]);return this},cube3D:function(F,E,u,t,s,G,v,r,D,C,A,H){F=b(C,F);E=b(C,E);r=(!r||r==0)?G:r;if(s){var z=iChart.vectorP2P(u,t);u=F+r*z.x,t=E-r*z.y}else{u=F+r*u,t=E-r*t}while(H.length<6){H.push(false)}u=b(C,u);t=b(C,t);var B=[];if(t<0){if(iChart.isObject(H[4])){B.push(iChart.applyIf({points:[{x:F,y:E-v},{x:u,y:t-v},{x:u+G,y:t-v},{x:F+G,y:E-v}]},H[4]))}}else{if(iChart.isObject(H[0])){B.push(iChart.applyIf({points:[{x:F,y:E},{x:u,y:t},{x:u+G,y:t},{x:F+G,y:E}]},H[0]))}}if(iChart.isObject(H[1])){B.push(iChart.applyIf({points:[{x:u,y:t},{x:u,y:t-v},{x:u+G,y:t-v},{x:u+G,y:t}]},H[1]))}if(iChart.isObject(H[2])){B.push(iChart.applyIf({points:[{x:F,y:E},{x:F,y:E-v},{x:u,y:t-v},{x:u,y:t}]},H[2]))}if(iChart.isObject(H[3])){B.push(iChart.applyIf({points:[{x:F+G,y:E},{x:F+G,y:E-v},{x:u+G,y:t-v},{x:u+G,y:t}]},H[3]))}if(t<0){if(iChart.isObject(H[0])){B.push(iChart.applyIf({points:[{x:F,y:E},{x:u,y:t},{x:u+G,y:t},{x:F+G,y:E}]},H[0]))}}else{if(iChart.isObject(H[4])){B.push(iChart.applyIf({points:[{x:F,y:E-v},{x:u,y:t-v},{x:u+G,y:t-v},{x:F+G,y:E-v}]},H[4]))}}if(iChart.isObject(H[5])){B.push(iChart.applyIf({points:[{x:F,y:E},{x:F,y:E-v},{x:F+G,y:E-v},{x:F+G,y:E}]},H[5]))}B.each(function(w){this.polygon(w.color,D,C,A,w.shadow,w.alpha,w.points)},this);return this},polygon:function(x,A,z,y,B,v,s,r,t,u){this.save().strokeStyle(A,z,y).beginPath().fillStyle(x).globalAlpha(v).shadowOn(B).moveTo(s[0].x,s[0].y);
if(r){this.moveTo(b(z,u[0].x),b(z,u[0].y)).lineTo(b(z,s[0].x),b(z,s[0].y));for(var w=1;w<s.length;w++){this.bezierCurveTo(k(s,s[w],w,t))}this.lineTo(b(z,u[1].x),b(z,u[1].y))}else{for(var w=1;w<s.length;w++){this.lineTo(b(z,s[w].x),b(z,s[w].y))}}return this.closePath().stroke(A).fill(x).restore()},lines:function(u,r,v,t){this.save().gCo(t).beginPath().strokeStyle(true,r,v).moveTo(b(r,u[0]),b(r,u[1]));for(var s=2;s<u.length-1;s+=2){this.lineTo(b(r,u[s]),b(r,u[s+1]))}return this.stroke(true).restore()},bezierCurveTo:function(s){this.c.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);return this},label:function(s,r,t){return this.save().beginPath().strokeStyle(true,r,t).moveTo(b(r,s[0].x),b(r,s[0].y)).bezierCurveTo([s[1].x,s[1].y,s[2].x,s[2].y,s[3].x,s[3].y]).stroke(true).restore()},lineArray:function(u,s,x,r,v){this.save().beginPath().strokeStyle(true,s,x).moveTo(b(s,u[0].x),b(s,u[0].y));for(var t=1;t<u.length;t++){if(r){this.bezierCurveTo(k(u,u[t],t,v||1.5))}else{this.lineTo(b(s,u[t].x),b(s,u[t].y))}}return this.stroke(true).restore()},dotted:function(s,F,r,E,G,C,D,A,H){if(!G){return this}s=b(G,s);F=b(G,F);r=b(G,r);E=b(G,E);var B=iChart.distanceP2P(s,F,r,E),I;if(D<=0||B<=D||(s!=r&&F!=E)){return this.line(s,F,r,E,G,C,H)}if(s>r||F>E){I=s;s=r;r=I;I=F;F=E;E=I}this.save().gCo(H).strokeStyle(true,G,C).beginPath().moveTo(s,F);var v=D*(A||1),z=h(B/(D+v)),u=(B-z*(D+v))>D,y=(F==E);z=u?z+1:z;for(var x=1;x<=z;x++){this.lineTo(y?s+D*x+v*(x-1):s,y?F:F+D*x+v*(x-1)).moveTo(y?s+(D+v)*x:s,y?F:F+(D+v)*x)
}if(!u){this.lineTo(r,E)}return this.stroke(true).restore()},line:function(t,v,s,u,r,y,x){if(!r){return this}this.save().gCo(x);return this.beginPath().strokeStyle(true,r,y).moveTo(b(r,t),b(r,v)).lineTo(b(r,s),b(r,u)).stroke(true).restore()},round:function(s,z,t,w,v,u){return this.arc(s,z,t,0,0,l,w,!!u,v,u)},round0:function(t,s,w,v,u){return this.arc(t.x,t.y,s,0,0,l,w,!!u,v,u)},fillRect:function(r,u,s,t){this.c.fillRect(r,u,s,t);return this},translate:function(r,s){this.c.translate(r,s);return this},rotate:function(s){this.c.rotate(s);return this},clearRect:function(r,u,s,t){r=r||0;u=u||0;s=s||this.width;t=t||this.height;this.c.clearRect(r,u,s,t);return this},gCo:function(r){if(r){return this.gCO(r)}return this},gCO:function(r){this.c.globalCompositeOperation=r?"destination-over":"source-over";return this},box:function(E,C,F,z,D,v,H,t,G){D=D||{enable:0};if(D.enable){var u=D.width,B=D.color,s=D.radius,A=iChart.isNumber(u);u=iChart.parsePadding(u);if(u[0]==u[1]&&u[1]==u[2]&&u[2]==u[3]){A=true}t=t?1:-1;F+=t*(u[1]+u[3])/2;z+=t*(u[0]+u[2])/2;E-=t*(u[3]/2);C-=t*(u[0]/2);u=A?u[0]:u;s=(!A||!s||s==0||s=="0")?0:iChart.parsePadding(s)}this.save().gCo(G).fillStyle(v).strokeStyle(A,u,B);if(s){this.beginPath().moveTo(b(u,E+s[0]),b(u,C)).lineTo(b(u,E+F-s[1]),b(u,C)).arc2(b(u,E+F-s[1]),b(u,C+s[1]),s[1],q*3/2,l).lineTo(b(u,E+F),b(u,C+z-s[2])).arc2(b(u,E+F-s[2]),b(u,C+z-s[2]),s[2],0,q/2).lineTo(b(u,E+s[3]),b(u,C+z)).arc2(b(u,E+s[3]),b(u,C+z-s[3]),s[3],q/2,q).lineTo(b(u,E),b(u,C+s[0])).arc2(b(u,E+s[0]),b(u,C+s[0]),s[0],q,q*3/2).closePath().shadowOn(H).stroke(u).shadowOff().fill(v)
}else{if(!D.enable||A){if(u&&D.enable){this.shadowOn(H).c.strokeRect(E,C,F,z);this.shadowOff()}if(v){this.fillRect(E,C,F,z)}}else{if(u){B=iChart.isArray(B)?B:[B,B,B,B];this.shadowOn(H).line(E+F,C+u[0]/2,E+F,C+z-u[0]/2,u[1],B[1],0).line(E,C+u[0]/2,E,C+z-u[0]/2,u[3],B[3],0).line(h(E-u[3]/2),C,E+F+u[1]/2,C,u[0],B[0],0).line(h(E-u[3]/2),C+z,E+F+u[1]/2,C+z,u[2],B[2],0).shadowOff()}if(v){this.beginPath().moveTo(h(E+u[3]/2),h(C+u[0]/2)).lineTo(o(E+F-u[1]/2),C+u[0]/2).lineTo(o(E+F-u[1]/2),o(C+z-u[2]/2)).lineTo(h(E+u[3]/2),o(C+z-u[2]/2)).lineTo(h(E+u[3]/2),h(C+u[0]/2)).closePath().fill(v)}}}return this.restore()},toDataURL:function(r){return this.canvas.toDataURL(r||"image/png")},addEvent:function(t,s,r){iChart.Event.addEvent(this.canvas,t,s,r)}};iChart.taylor={light:function(r,s){s.highlight=false;r.on("mouseover",function(){s.highlight=true;r.redraw("mouseover")}).on("mouseout",function(){s.highlight=false;r.redraw("mouseout")}).on("beforedraw",function(){r.push("f_color",s.highlight?r.get("light_color"):r.get("f_color_"));return true})}};iChart.Chart=iChart.extend(iChart.Painter,{configure:function(){iChart.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({id:"",render:"",data:[],width:undefined,height:undefined,lineJoin:"round",align:"center",default_mouseover_css:true,turn_off_touchmove:false,showpercent:false,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},title_align:"center",title_valign:"top",animation:false,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1000,z_index:999,legend:{enable:false},tip:{enable:false}});
this.registerEvent("beforeAnimation","afterAnimation","animating");this.T=null;this.Rendered=false;this.Combination=false;this.Animationed=false;this.data=[];this.plugins=[];this.components=[];this.total=0;this.ICHARTJS_CHART=true},toDataURL:function(r){return this.T.toDataURL(r)},segmentRect:function(){if(!this.Combination){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))}},resetCanvas:function(){if(!this.Combination){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,true)}},animation:function(r){r.segmentRect();if(r.coo&&!r.ILLUSIVE_COO){r.coo.draw()}r.doAnimation(r.variable.animation.time,r.duration,r);if(r.legend){r.legend.draw()}r.plugins.each(function(s){if(s.A_draw){s.variable.animation.animating=true;s.variable.animation.time=r.variable.animation.time;s.draw();s.variable.animation.animating=false}});if(r.Combination){return}r.resetCanvas();if(r.variable.animation.time<r.duration){r.variable.animation.time++;iChart.requestAnimFrame(function(){r.animation(r)})}else{iChart.requestAnimFrame(function(){r.Animationed=true;r.plugins.each(function(s){s.Animationed=true});r.processAnimation=false;r.draw();r.plugins.each(function(s){s.processAnimation=false});r.fireEvent(r,"afterAnimation",[r])})}},runAnimation:function(r){r.fireEvent(r,"beforeAnimation",[r]);if(!r.A_draw){r.variable.animation={type:0,time:0,queue:[]}}r.processAnimation=true;
r.animation(r)},doSort:function(){this.components.sor(function(s,r){return(iChart.isArray(s)?(s.zIndex||0):s.get("z_index"))>(iChart.isArray(r)?(r.zIndex||0):r.get("z_index"))})},commonDraw:function(r,s){if(!r.redraw){iChart.Assert.isTrue(r.Rendered,r.type+" has not rendered");iChart.Assert.isTrue(r.data&&r.data.length>0,r.type+"'s data is empty");iChart.Assert.isTrue(r.initialization,r.type+" Failed to initialize");r.doSort();r.oneways.eachAll(function(t){t.draw()})}r.redraw=true;if(!r.Animationed&&r.get("animation")){r.runAnimation(r);return}r.segmentRect();r.components.eachAll(function(t){t.draw(s)});r.resetCanvas()},plugin:function(s){var r=this._();s.inject(r);if(s.ICHARTJS_CHART){s.Combination=true;s.setUp()}if(!r.get("animation")){s.push("animation",false)}s.duration=r.duration;r.components.push(s);r.plugins.push(s)},destroy:function(){this.components.eachAll(function(r){r.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){var r=this._();r.redraw=false;r.T.clearRect();r.initialization=false;r.initialize()},create:function(s,u){if(s.get("fit")){var r=window.innerWidth,x=window.innerHeight,v=iChart.getDoc().body.style;v.padding="0px";v.margin="0px";v.overflow="hidden";s.push(s.W,r);s.push(s.H,x)}s.canvasid=iChart.uid(s.type);
s.shellid="shell-"+s.canvasid;var t=[];t.push("<div id='");t.push(s.shellid);t.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>");t.push("<canvas id= '");t.push(s.canvasid);t.push("'><p>Your browser does not support the canvas element</p></canvas></div>");u.innerHTML=t.join("");s.shell=g(s.shellid);s.T=s.target=new d(s.canvasid);s.size(s);s.Rendered=true},size:function(r){r.T.canvas.width=r.width=r.pushIf(r.W,400);r.T.canvas.height=r.height=r.pushIf(r.H,300);r.shell.style.width=r.width+"px";r.shell.style.height=r.height+"px"},initialize:function(){var s=this._(),u=s.get("data"),t=s.get("render");if(s.Combination){iChart.apply(s.options,iChart.clone([s.W,s.H,"padding","border","client_height","client_width","minDistance","maxDistance","minstr","centerx","centery","l_originx","r_originx","t_originy","b_originy"],s.root.options,true));s.width=s.get(s.W);s.height=s.get(s.H);s.shell=s.root.shell;s.Rendered=true}else{if(!s.Rendered){if(t){s.create(s,g(t))}}else{if(s.width!=s.get(s.W)||s.height!=s.get(s.H)){s.size(s)}}}if(s.Rendered&&!s.initialization){if(u&&u.length>0){e.call(s,u,s)}else{if(iChart.isString(s.get("url"))){s.ajax.call(s,s.get("url"),function(r){s.push("data",r);s.initialize();s.draw()})}}}},eventOff:function(){this.stopEvent=true},eventOn:function(){this.stopEvent=false},oneWay:function(r){var x=r.variable.event,v=r.Combination,u=!r.get("turn_off_touchmove")&&!v,t=!iChart.touch&&r.get("default_mouseover_css")&&!v,y,w,s=iChart.touch?["touchstart","touchmove"]:["click","mousemove"];
r.stopEvent=false;r.A_draw=v&&r.processAnimation;iChart.register(r);if(!v){s.each(function(z){r.T.addEvent(z,function(A){if(r.processAnimation||r.stopEvent){return}if(A.targetTouches&&A.targetTouches.length!=1){return}r.fireEvent(r,z,[r,iChart.Event.fix(A)])},false)})}r.on(s[0],function(z,A){z.components.eachAll(function(B){if(B.ICHARTJS_CHART){if(B.fireEvent(B,s[0],[B,A])){x.click=true;return false}}else{var D=B.isMouseOver(A);if(D.valid){x.click=true;B.fireEvent(B,"click",[B,A,D]);return !A.stopPropagation}}});if(x.click){if(u){A.event.preventDefault()}x.click=false;return true}});if(!iChart.touch||u){r.on(s[1],function(z,A){y=w=false;z.components.eachAll(function(D){if(D.ICHARTJS_CHART){if(D.fireEvent(D,s[1],[D,A])){y=true;return false}}else{var B=D.variable.event,E=D.isMouseOver(A);if(E.valid){y=y||D.atomic;if(!B.mouseover){B.mouseover=true;D.fireEvent(D,"mouseover",[D,A,E])}D.fireEvent(D,"mousemove",[D,A,E]);if(E.stop){return false}}else{if(B.mouseover){B.mouseover=false;D.fireEvent(D,"mouseout",[D,A,E])}}return !A.stopPropagation}});if(x.mouseover){A.event.preventDefault();if(!y&&x.mouseover){x.mouseover=false;z.fireEvent(z,"mouseout",[z,A])}return x.mouseover}else{if(y){x.mouseover=y;z.fireEvent(z,"mouseover",[z,A])}}});if(t){r.on("mouseover",function(){r.T.css("cursor","pointer")}).on("mouseout",function(){r.T.css("cursor","default")})}}r.oneWay=iChart.emptyFn},originXY:function(t,s,u){var r=t.get("align");if(r==t.L){t.pushIf(t.X,s[0])}else{if(r==t.R){t.pushIf(t.X,s[1])
}else{t.pushIf(t.X,s[2])}}t.x=t.push(t.X,t.get(t.X)+t.get("offsetx"));t.y=t.push(t.Y,t.get(t.Y)||u[0]+t.get("offsety"));return{x:t.x,y:t.y}},getPercent:function(r,s){return this.get("showpercent")?(r/(s||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":r},doActing:function(s,z,y,w,u){var x=!!s.get("communal_acting"),r=s.getPercent(z.value,z.total);s.push(x?"sub_option":"communal_acting",iChart.clone(s.get(x?"communal_acting":"sub_option"),true));iChart.merge(s.get("sub_option"),z);iChart.merge(s.get("sub_option"),y);s.push("sub_option.value",r);if(s.get("sub_option.tip.enable")){s.push("sub_option.tip.text",u||(z.name+" "+r));s.push("sub_option.tip.name",z.name);s.push("sub_option.tip.value",z.value);s.push("sub_option.tip.total",z.total||s.total)}},doConfig:function(){iChart.Chart.superclass.doConfig.call(this);var v=this._();v.T.strokeStyle(true,0,v.get("strokeStyle"),v.get("lineJoin"));v.processAnimation=v.get("animation");v.push("communal_acting",0);if(iChart.isFunction(v.get("doAnimation"))){v.doAnimation=v.get("doAnimation")}v.animationArithmetic=iChart.getAA(v.get("animation_timing_function"));v.destroy();v.components=[];v.plugins.each(function(t){v.components.push(t)});v.oneWay(v);iChart.applyIf(v.get("sub_option"),iChart.clone(["shadow","tip"],v.options,true));v.push("r_originx",v.width-v.get("padding_right"));v.push("b_originy",v.height-v.get("padding_bottom"));v.oneways=[];if(!v.Combination){var y=0,s=v.push("l_originx",v.get("padding_left")),x=v.push("t_originy",v.get("padding_top")),r=v.push("client_width",(v.width-v.get("hpadding"))),z;
v.duration=o(v.get("animation_duration")*iChart.FRAME/1000);v.oneways.push(new iChart.Custom({drawFn:function(){v.T.box(0,0,v.width,v.height,v.get("border"),v.get("f_color"),0,0,true)}}));v.applyGradient();if(iChart.isString(v.get("title"))){v.push("title",iChart.applyIf({text:v.get("title")},v.default_.title))}if(iChart.isString(v.get("subtitle"))){v.push("subtitle",iChart.applyIf({text:v.get("subtitle")},v.default_.subtitle))}if(iChart.isString(v.get("footnote"))){v.push("footnote",iChart.applyIf({text:v.get("footnote")},v.default_.footnote))}if(v.get("title.text")!=""){var u=v.get("subtitle.text")!="";y=u?v.get("title.height")+v.get("subtitle.height"):v.get("title.height");x=v.push("t_originy",x+y);v.push("title.originx",s);v.push("title.originy",v.get("padding_top"));v.push("title.width",r);v.title=new iChart.Text(v.get("title"),v);v.oneways.push(v.title);if(u){v.push("subtitle.originx",s);v.push("subtitle.originy",v.get("title.originy")+v.get("title.height"));v.push("subtitle.width",r);v.subtitle=new iChart.Text(v.get("subtitle"),v);v.oneways.push(v.subtitle)}}if(v.get("footnote.text")!=""){var A=v.get("footnote.height");y+=A;v.push("b_originy",v.get("b_originy")-A);v.push("footnote.originx",s);v.push("footnote.originy",v.get("b_originy"));v.push("footnote.width",r);v.footnote=new iChart.Text(v.get("footnote"),v);v.oneways.push(v.footnote)}z=v.push("client_height",(v.get(v.H)-v.get("vpadding")-y));v.push("minDistance",f(r,z));v.push("maxDistance",j(r,z));v.push("minstr",r<z?v.W:v.H);
v.push("centerx",s+r/2);v.push("centery",x+z/2)}if(v.get("legend.enable")){v.legend=new iChart.Legend(iChart.apply({maxwidth:v.get("client_width"),data:v.data},v.get("legend")),v);v.components.push(v.legend)}v.push("sub_option.tip.wrap",v.push("tip.wrap",v.shell))}})})(a);iChart.Custom=iChart.extend(iChart.Component,{configure:function(){iChart.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:iChart.emptyFn,configFn:iChart.emptyFn,eventValid:undefined,animating_draw:true})},doDraw:function(b){b.get("drawFn").call(b,b)},isEventValid:function(c,b){if(iChart.isFunction(this.get("eventValid"))){return this.get("eventValid").call(this,c,b)}return{valid:false}},doConfig:function(){iChart.Custom.superclass.doConfig.call(this);var b=this._();b.A_draw=b.get("animating_draw");b.variable.animation={animating:false,time:0};b.duration=0;b.get("configFn").call(b,b)}});iChart.Scale=iChart.extend(iChart.Component,{configure:function(){iChart.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:true,distance:undefined,start_scale:0,end_scale:undefined,min_scale:undefined,max_scale:undefined,scale_space:undefined,scale_share:5,scale_enable:true,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:false}},getScale:function(c){var b=[c.get("basic_value"),c.get("start_scale"),c.get("end_scale"),c.get("end_scale")-c.get("start_scale"),0];
b[4]=iChart.inRange(b[1],b[2]+1,b[0])||iChart.inRange(b[2]-1,b[1],b[0]);return{range:b[4],basic:b[4]?(b[0]-b[1])/b[3]:0,start:b[4]?b[0]:b[1],end:b[2],distance:b[3]}},doDraw:function(b){if(b.get("scale_enable")){b.items.each(function(c){b.T.line(c.x0,c.y0,c.x1,c.y1,b.get("scale_size"),b.get("scale_color"),false)})}b.labels.each(function(c){c.draw()})},doLayout:function(b,d,c){if(c.get("scale_enable")){c.items.each(function(e){e.x0+=b;e.y0+=d;e.x1+=b;e.y1+=d})}c.labels.each(function(e){e.doLayout(b,d,0,e)})},doConfig:function(){iChart.Scale.superclass.doConfig.call(this);var E=this._(),t=Math.abs,u=E.get("labels").length,v=E.get("min_scale"),F=E.get("max_scale"),s=E.get("scale_space"),b=E.get("end_scale"),e=E.get("start_scale");E.items=[];E.labels=[];E.number=0;if(u>0){E.number=u-1}else{if(e>v){e=E.push("start_scale",iChart.floor(v))}if(!iChart.isNumber(b)||b<F){b=iChart.ceil(F);b=E.push("end_scale",(!b&&!e)?1:b)}if(s&&t(s)<t(b-e)){E.push("scale_share",(b-e)/s)}E.number=E.push("scale_share",t(E.get("scale_share")));if(!s||s>(b-e)){var g=((b-e)+"").indexOf(".")+1,k=1;while(g>0){g--;k*=10}s=E.push("scale",(b-e)*k/E.get("scale_share")/k)}if(parseInt(s)!=s&&E.get("decimalsnum")==0){E.push("decimalsnum",(s+"").substring((s+"").indexOf(".")+1).length)}}E.push("distanceOne",E.get("valid_distance")/E.number);var r,o,m,A=0,f=0,B=0,h=0,D=0,C=0,p=E.get("scale_width"),n=p/2,d=E.get("scaleAlign"),l=E.get("position"),c=E.get("text_space"),j="",q=E.get("coo").get("axis.width");E.push("which",E.get("which").toLowerCase());
E.isH=E.get("which")=="h";if(E.isH){if(d==E.O){h=-p}else{if(d==E.C){h=-n;f=n}else{f=p}}if(l==E.O){C=-c-q[0];j=E.B}else{C=c+q[2];j=E.O}l=E.C}else{if(d==E.L){B=-p}else{if(d==E.C){B=-n;A=n}else{A=p}}j="middle";if(l==E.R){l=E.L;D=c+q[1]}else{l=E.R;D=-c-q[3]}}for(var z=0;z<=E.number;z++){r=u?E.get("labels")[z]:(s*z+e).toFixed(E.get("decimalsnum"));o=E.isH?E.get("valid_x")+z*E.get("distanceOne"):E.x;m=E.isH?E.y:E.get("valid_y")+E.get("distance")-z*E.get("distanceOne");E.items.push({x:o,y:m,x0:o+B,y0:m+h,x1:o+A,y1:m+f});if(E.get("label")){E.labels.push(new iChart.Text(iChart.applyIf(iChart.apply(E.get("label"),iChart.merge({text:r,x:o,y:m,originx:o+D,originy:m+C},E.fireEvent(E,"parseText",[r,o+D,m+C,z,E.number==z]))),{textAlign:l,textBaseline:j}),E))}}}});iChart.Coordinate={coordinate_:function(i){var l=this._(),b=l.get("coordinate");if(b.ICHARTJS_OBJECT){l.ILLUSIVE_COO=true;return b}var j=0.84,d=iChart.parsePercent,c=l.get("coordinate.scale"),m=l.get("scaleAlign"),k=l.push("coordinate.width",d(l.get("coordinate.width"),Math.floor(l.get("client_width")*j))),e=l.push("coordinate.height",d(l.get("coordinate.height"),Math.floor(l.get("client_height")*j))-(l.is3D()?((l.get("coordinate.pedestal_height")||22)+(l.get("coordinate.board_deep")||20)):0));l.push("coordinate.valid_width",d(l.get("coordinate.valid_width"),k)),l.push("coordinate.valid_height",d(l.get("coordinate.valid_height"),e));l.originXY(l,[l.get("l_originx"),l.get("r_originx")-k,l.get("centerx")-k/2],[l.get("centery")-e/2]);l.push("coordinate.originx",l.x);
l.push("coordinate.originy",l.y);if(i){i()}if(iChart.isObject(c)){c=[c]}if(iChart.isArray(c)){c.each(function(f){if(l.get("percent")&&f.position==m){f=iChart.apply(f,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(h,g,n){return{text:h+"%"}}}})}if(!f.start_scale){f.min_scale=l.get("minValue")}if(!f.end_scale){f.max_scale=l.get("maxValue")}})}else{l.push("coordinate.scale",{position:m,scaleAlign:m,max_scale:l.get("maxValue"),min_scale:l.get("minValue")})}if(l.is3D()){l.push("coordinate.xAngle_",l.get("xAngle_"));l.push("coordinate.yAngle_",l.get("yAngle_"));l.push("coordinate.zHeight",l.get("zHeight")*l.get("bottom_scale"))}b=new a[l.is3D()?"Coordinate3D":"Coordinate2D"](l.get("coordinate"),l);l.components.push(b);return b}};iChart.Coordinate2D=iChart.extend(iChart.Component,{configure:function(){iChart.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"80%",height:"80%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:true,scale2grid:true,grids:undefined,ignoreOverlap:true,ignoreEdge:false,xlabel:"",ylabel:"",background_color:0,striped:true,striped_direction:"v",striped_factor:0.01,crosshair:{enable:false},width:undefined,height:undefined,z_index:-1,axis:{enable:true,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(f,b){var c=this._(),e;for(var d=0;d<c.scale.length;d++){if(c.scale[d].get("position")==f){return c.scale[d].getScale(c.scale[d])
}}if(!b){if(f==c.L){f=c.R}else{if(f==c.R){f=c.L}else{if(f==c.O){f=c.B}else{f=c.O}}}return c.getScale(f,true)}throw new Error("there no valid scale")},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.get(b.W))&&c.y<b.y+b.get(b.H)&&c.y>b.y}},doDraw:function(e){e.T.box(e.x,e.y,e.get(e.W),e.get(e.H),0,e.get("f_color"));if(e.get("striped")){var b,j,h=false,g=e.get("axis.width"),i=iChart.dark(e.get("background_color"),e.get("striped_factor"),0)}var d=(e.get("striped_direction")=="v");e.gridlines.each(function(f,c){if(e.get("striped")){if(h){if(d){e.T.box(f.x1,f.y1+f.width,f.x2-f.x1,j-f.y1-f.width,0,i)}else{e.T.box(b+f.width,f.y2,f.x1-b,f.y1-f.y2,0,i)}}b=f.x1;j=f.y1;h=!h}}).each(function(c){if(!c.overlap){if(c.solid){e.T.line(c.x1,c.y1,c.x2,c.y2,c.width,c.color)}else{e.T.dotted(c.x1,c.y1,c.x2,c.y2,c.width,c.color,c.size,c.fator)}}});e.T.box(e.x,e.y,e.get(e.W),e.get(e.H),e.get("axis"),false,e.get("shadow"),true);e.scale.each(function(c){c.draw()})},destroy:function(){if(this.crosshair){this.crosshair.destroy()}},doCrosshair:function(b){if(b.get("crosshair.enable")&&!b.crosshair){b.push("crosshair.wrap",b.root.shell);b.push("crosshair.height",b.get(b.H));b.push("crosshair.width",b.get(b.W));b.push("crosshair.top",b.y);b.push("crosshair.left",b.x);b.crosshair=new iChart.CrossHair(b.get("crosshair"),b)}},doConfig:function(){iChart.Coordinate2D.superclass.doConfig.call(this);var K=this._();K.atomic=false;if(K.get("gradient")&&iChart.isString(K.get("f_color"))){K.push("f_color",K.T.avgLinearGradient(K.x,K.y,K.x,K.y+K.get(K.H),[K.get("dark_color"),K.get("light_color")]))
}if(K.get("axis.enable")){var m=K.get("axis.width");if(!iChart.isArray(m)){K.push("axis.width",[m,m,m,m])}}else{K.push("axis.width",[0,0,0,0])}K.doCrosshair(K);var A,o=!!(K.get("gridlinesVisible")&&K.get("grids")),e=o&&!!K.get("grids.horizontal"),L=o&&!!K.get("grids.vertical"),C=K.get(K.H),l=K.get(K.W),u=K.get("valid_width"),I=K.get("valid_height"),b=K.get("gridlinesVisible")&&K.get("scale2grid")&&!(e&&L),t=(l-u)/2,H=(C-I)/2,c=K.get("axis.width");K.push("x_start",K.x+(l-u)/2);K.push("x_end",K.x+(l+u)/2);K.push("y_start",K.y+(C-I)/2);K.push("y_end",K.y+(C+I)/2);if(!iChart.isArray(K.get("scale"))){if(iChart.isObject(K.get("scale"))){K.push("scale",[K.get("scale")])}else{K.push("scale",[])}}K.get("scale").each(function(d,g){A=d.position;A=A||K.L;A=A.toLowerCase();d[K.X]=K.x;d.coo=K;d[K.Y]=K.y;d.valid_x=K.x+t;d.valid_y=K.y+H;d.position=A;if(A==K.O){d.which="h";d.distance=l;d.valid_distance=u}else{if(A==K.R){d.which="v";d.distance=C;d.valid_distance=I;d[K.X]+=l;d.valid_x+=u}else{if(A==K.B){d.which="h";d.distance=l;d.valid_distance=u;d[K.Y]+=C;d.valid_y+=I}else{d.which="v";d.distance=C;d.valid_distance=I}}}K.scale.push(new iChart.Scale(d,K.root))},K);var r=K.push("ignoreOverlap",K.get("ignoreOverlap")&&K.get("axis.enable")||K.get("ignoreEdge"));if(r){if(K.get("ignoreEdge")){var f=function(g,d,h){return g=="v"?(h==K.y)||(h==K.y+C):(d==K.x)||(d==K.x+g)}}else{var f=function(g,d,h){return g=="v"?(h==K.y&&c[0]>0)||(h==(K.y+C)&&c[2]>0):(d==K.x&&c[3]>0)||(d==(K.x+l)&&c[1]>0)}}}var D={solid:true,size:10,fator:1,width:K.get("grid_line_width"),color:K.get("grid_color")},G=iChart.applyIf(K.get("gridHStyle"),D),z=iChart.applyIf(K.get("gridVStyle"),D);
if(b){var J,k,j,s;K.scale.each(function(d){s=d.get("position");if(iChart.isFalse(d.get("scale2grid"))||e&&d.get("which")=="v"||L&&d.get("which")=="h"){return}k=j=0;if(s==K.O){j=C}else{if(s==K.R){k=-l}else{if(s==K.B){j=-C}else{k=l}}}d.items.each(function(g){if(r){K.gridlines.push(iChart.applyIf({overlap:f.call(K,d.get("which"),g.x,g.y),x1:g.x,y1:g.y,x2:g.x+k,y2:g.y+j},d.isH?z:G))}})})}if(L){var q=K.get("grids.vertical");iChart.Assert.isTrue(q.value>0,"vertical value");var F=l/q.value,v=q.value;if(q.way=="given_value"){v=F;F=q.value;F=F>l?l:F}for(var B=0;B<=v;B++){if(r){K.gridlines.push(iChart.applyIf({overlap:f.call(K,"h",K.x+B*F,K.y),x1:K.x+B*F,y1:K.y,x2:K.x+B*F,y2:K.y+C,H:false,width:z.width,color:z.color},z))}}}if(e){var E=K.get("grids.horizontal");iChart.Assert.isTrue(E.value>0,"horizontal value");var F=C/E.value,v=E.value;if(E.way=="given_value"){v=F;F=E.value;F=F>C?C:F}for(var B=0;B<=v;B++){if(r){K.gridlines.push(iChart.applyIf({overlap:f.call(K,"v",K.x,K.y+B*F),x1:K.x,y1:K.y+B*F,x2:K.x+l,y2:K.y+B*F,H:true,width:G.width,color:G.color},G))}}}}});iChart.Coordinate3D=iChart.extend(iChart.Coordinate2D,{configure:function(){iChart.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=iChart._3D;this.set({xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,zHeight:0,pedestal_height:22,board_deep:20,left_board:true,gradient:true,color_factor:0.18,ignoreEdge:true,striped:false,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:false}})
},doDraw:function(f){var d=f.get(f.W),g=f.get(f.H),j=f.get("xAngle_"),c=f.get("yAngle_"),i=f.get("zHeight"),e=f.get("z_offx"),b=f.get("z_offy");if(f.get("pedestal_height")){f.T.cube3D(f.x,f.y+g+f.get("pedestal_height"),j,c,false,d,f.get("pedestal_height"),i*3/2,f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("bottom_style"))}if(f.get("board_deep")){f.T.cube3D(f.x+e,f.y+g-b,j,c,false,d,g,f.get("board_deep"),f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("board_style"))}f.T.cube3D(f.x,f.y+g,j,c,false,d,g,i,f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("wall_style"));f.gridlines.each(function(h){if(h.solid){if(f.get("left_board")){f.T.line(h.x1,h.y1,h.x1+e,h.y1-b,h.width,h.color)}f.T.line(h.x1+e,h.y1-b,h.x2+e,h.y2-b,h.width,h.color)}else{if(f.get("left_board")){f.T.dotted(h.x1,h.y1,h.x1+e,h.y1-b,h.width,h.color,h.size,h.fator)}f.T.dotted(h.x1+e,h.y1-b,h.x2+e,h.y2-b,h.width,h.color,h.size,h.fator)}});f.scale.each(function(h){h.draw()})},doConfig:function(){iChart.Coordinate3D.superclass.doConfig.call(this);var g=this._(),d=g.get("wall_style"),i=g.get("background_color")||"#d6dbd2",j=g.get(g.H),c=g.get(g.W),k=g.get("color_factor"),e=g.push("z_offx",g.get("xAngle_")*g.get("zHeight")),b=g.push("z_offy",g.get("yAngle_")*g.get("zHeight"));while(d.length<6){d.push({color:i})}if(!g.get("left_board")){d[2]=false;g.scale.each(function(f){f.doLayout(e,-b,f)})}g.push("bottom_style",[{color:g.get("shadow_color"),shadow:g.get("shadow")},false,false,{color:d[3].color},false,{color:d[3].color}]);
g.push("board_style",[false,false,false,{color:d[4].color},{color:d[5].color},false]);if(g.get("gradient")){if(iChart.isString(d[0].color)){d[0].color=g.T.avgLinearGradient(g.x,g.y+j,g.x+c,g.y+j,[iChart.dark(d[0].color,k/2+0.06),iChart.dark(d[0].color,k/2+0.06)])}if(iChart.isString(d[1].color)){d[1].color=g.T.avgLinearGradient(g.x+e,g.y-b,g.x+e,g.y+j-b,[iChart.dark(d[1].color,k),iChart.light(d[1].color,k)])}if(iChart.isString(d[2].color)){d[2].color=g.T.avgLinearGradient(g.x,g.y,g.x,g.y+j,[iChart.light(d[2].color,k/3),iChart.dark(d[2].color,k)])}g.get("bottom_style")[5].color=g.T.avgLinearGradient(g.x,g.y+j,g.x,g.y+j+g.get("pedestal_height"),[iChart.light(d[3].color,k/2+0.06),iChart.dark(d[3].color,k/2,0)])}g.push("wall_style",[d[0],d[1],d[2]])}});iChart.Rectangle=iChart.extend(iChart.Component,{configure:function(){iChart.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=true;this.registerEvent("parseText");this.label=null},doDraw:function(b){b.drawRectangle();if(b.label){b.label.draw()}},doConfig:function(){iChart.Rectangle.superclass.doConfig.call(this);var g=this._(),f=g.variable.event,i=g.get("valueAlign");iChart.taylor.light(g,f);g.width=g.get(g.W);g.height=g.get(g.H);var d=g.push("centerx",g.x+g.width/2),j=g.push("centery",g.y+g.height/2),e=g.C,c="middle",h=g.get("value_space");g.push("value",g.fireString(g,"parseText",[g,g.get("value")],g.get("value")));
if(i==g.L){e=g.R;d=g.x-h}else{if(i==g.R){e=g.L;d=g.x+g.width+h}else{if(i==g.B){j=g.y+g.height+h;c=g.O}else{if(i==g.O){j=g.y-h;c=g.B}}}}if(g.get("label")){g.push("label.originx",d);g.push("label.originy",j);g.push("label.text",g.get("value"));iChart.applyIf(g.get("label"),{textAlign:e,textBaseline:c,color:g.get("color")});g.label=new iChart.Text(g.get("label"),g)}if(g.get("tip.enable")){if(g.get("tip.showType")!="follow"){g.push("tip.invokeOffsetDynamic",false)}g.tip=new iChart.Tip(g.get("tip"),g)}}});iChart.Rectangle2D=iChart.extend(iChart.Rectangle,{configure:function(){iChart.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){var b=this._();b.T.box(b.get(b.X),b.get(b.Y),b.get(b.W),b.get(b.H),b.get("border"),b.get("f_color"),b.get("shadow"))},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.width)&&c.y<(b.y+b.height)&&c.y>(b.y)}},tipInvoke:function(){var b=this._();return function(c,d){return{left:b.tipX(c,d),top:b.tipY(c,d)}}},doConfig:function(){iChart.Rectangle2D.superclass.doConfig.call(this);var b=this._(),c=b.get("tipAlign");if(c==b.L||c==b.R){b.tipY=function(d,e){return b.get("centery")-e/2}}else{b.tipX=function(d,e){return b.get("centerx")-d/2}}if(c==b.L){b.tipX=function(d,e){return b.x-b.get("value_space")-d}}else{if(c==b.R){b.tipX=function(d,e){return b.x+b.width+b.get("value_space")}}else{if(c==b.B){b.tipY=function(d,e){return b.y+b.height+3}}else{b.tipY=function(d,e){return b.y-e-3
}}}}b.applyGradient()}});iChart.Rectangle3D=iChart.extend(iChart.Rectangle,{configure:function(){iChart.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=iChart._3D;this.set({zHeight:undefined,xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,shadow_offsetx:2})},drawRectangle:function(){var b=this._();b.T.cube(b.get(b.X),b.get(b.Y),b.get("xAngle_"),b.get("yAngle_"),b.get(b.W),b.get(b.H),b.get("zHeight"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("light_color"),b.get("shadow"))},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.get(b.W))&&c.y<b.y+b.get(b.H)&&c.y>b.y}},tipInvoke:function(){var b=this._();return function(c,d){return{left:b.topCenterX-c/2,top:b.topCenterY-d}}},doConfig:function(){iChart.Rectangle3D.superclass.doConfig.call(this);var b=this._();b.pushIf("zHeight",b.get(b.W));b.topCenterX=b.x+(b.get(b.W)+b.get(b.W)*b.get("xAngle_"))/2;b.topCenterY=b.y-b.get(b.W)*b.get("yAngle_")/2;if(b.get("valueAlign")==b.O&&b.label){b.label.push("textx",b.topCenterX);b.label.push("texty",b.topCenterY)}}});iChart.Sector=iChart.extend(iChart.Component,{configure:function(){iChart.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:false,counterclockwise:false,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:false,donutwidth:0,mutex:false,increment:undefined,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:false,label:{},rounded:false});
this.atomic=true;this.registerEvent("changed","parseText");this.label=null;this.tip=null},bound:function(){if(!this.expanded){this.toggle()}},rebound:function(){if(this.expanded){this.toggle()}},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var b=this._();return{x:b.x,x:b.y,startAngle:b.get("startAngle"),middleAngle:b.get("middleAngle"),endAngle:b.get("endAngle")}},doDraw:function(b){if(!b.get("ignored")){if(b.label&&!b.get("mini_label")){b.label.draw()}b.drawSector();if(b.label&&b.get("mini_label")){b.label.draw()}}},doText:function(c,b,d){c.push("label.originx",b);c.push("label.originy",d);c.push("label.textBaseline","middle");c.label=new iChart.Text(c.get("label"),c)},doLabel:function(d,c,i,g,h,e,f,b){d.push("label.originx",c);d.push("label.originy",i);d.push("label.quadrantd",g);d.push("label.line_points",h);d.push("label.labelx",e);d.push("label.labely",f);d.push("label.smooth",b);d.push("label.angle",d.get("middleAngle")%(Math.PI*2));d.label=new iChart.Label(d.get("label"),d)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){iChart.Sector.superclass.doConfig.call(this);var c=this._(),b=c.variable.event,h=c.get("label"),e=c.get("bound_event"),d;if(c.get("rounded")){c.push("startAngle",0);c.push("endAngle",Math.PI*2);return}iChart.taylor.light(c,b);c.push("totalAngle",c.get("endAngle")-c.get("startAngle"));if(h){if(c.get("mini_label")){if((c.get("mini_label_threshold_angle")*Math.PI/180)>c.get("totalAngle")){c.push("mini_label",false)
}else{iChart.apply(c.get("label"),c.get("mini_label"))}}c.push("label.text",c.fireString(c,"parseText",[c,c.get("label.text")],c.get("label.text")));c.pushIf("label.border.color",c.get("border.color"));c.push("label.scolor",c.get("background_color"))}c.variable.event.status=c.expanded=c.get("expand");if(c.get("tip.enable")){if(c.get("tip.showType")!="follow"){c.push("tip.invokeOffsetDynamic",false)}c.tip=new iChart.Tip(c.get("tip"),c)}b.poped=false;c.on(e,function(){b.poped=true;c.expanded=!c.expanded;c.redraw(e);b.poped=false});c.on("beforedraw",function(g,f){if(f==e){d=false;c.x=c.get(c.X);c.y=c.get(c.Y);if(c.expanded){if(c.get("mutex")&&!b.poped){c.expanded=false;d=true}else{c.x+=c.get("inc_x");c.y-=c.get("inc_y")}}if(b.status!=c.expanded){c.fireEvent(c,"changed",[c,c.expanded]);d=true;b.status=c.expanded}if(h&&d){c.label.doLayout(c.get("inc_x")*(c.expanded?1:-1),-c.get("inc_y")*(c.expanded?1:-1),2,c.label)}}return true})}});iChart.Sector2D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(g,d){if(!d.get("ignored")){if(d.isLabel()&&d.label.isEventValid(g,d.label).valid){return{valid:true}
}var f=iChart.distanceP2P(d.x,d.y,g.x,g.y),c=d.get("donutwidth");if(d.r<f||(c&&(d.r-c)>f)){return{valid:false}}if(iChart.angleInRange(d.get("startAngle"),d.get("endAngle"),iChart.atan2Radian(d.x,d.y,g.x,g.y))){return{valid:true}}}return{valid:false}},tipInvoke:function(){var c=this,b=c.get("middleAngle"),d=iChart.quadrantd(b);return function(e,f){var g=iChart.p2Point(c.x,c.y,b,c.r*0.8);return{left:(d>=1&&d<=2)?(g.x-e):g.x,top:d>=2?(g.y-f):g.y}}},doConfig:function(){iChart.Sector2D.superclass.doConfig.call(this);var d=this._();d.r=d.get("radius");if(d.get("donutwidth")>d.r){d.push("donutwidth",0)}d.applyGradient(d.x-d.r,d.y-d.r,2*d.r*0.9,2*d.r*0.9);var c=d.get("middleAngle"),b=d.pushIf("increment",iChart.lowTo(5,d.r/10)),h;d.push("inc_x",b*Math.cos(2*Math.PI-c));d.push("inc_y",b*Math.sin(2*Math.PI-c));b*=2;if(d.get("label")){if(d.get("mini_label")){P2=iChart.p2Point(d.x,d.y,c,d.get("donutwidth")?d.r-d.get("donutwidth")/2:d.r/2);d.doText(d,P2.x,P2.y)}else{var e=iChart.quadrantd(c),g=iChart.p2Point(d.x,d.y,c,d.r+b),f=iChart.p2Point(d.x,d.y,c,d.r+b*0.6);P2=iChart.p2Point(d.x,d.y,c,d.r);d.doLabel(d,P2.x,P2.y,e,[{x:P2.x,y:P2.y},{x:f.x,y:f.y},{x:g.x,y:g.y}],g.x,g.y,b*0.4)}}}});iChart.Sector3D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=iChart._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0});this.proxy=true},isEventValid:function(c,b){if(!b.get("ignored")){if(b.isLabel()&&b.label.isEventValid(c,b.label).valid){return{valid:true}
}if(!iChart.inEllipse(c.x-b.x,c.y-b.y,b.a,b.b)){return{valid:false}}if(iChart.angleZInRange(b.sA,b.eA,iChart.atan2Radian(b.x,b.y,c.x,c.y))){return{valid:true}}}return{valid:false}},p2p:function(b,e,c,d){return{x:b+this.a*Math.cos(c)*d,y:e+this.b*Math.sin(c)*d}},tipInvoke:function(){var c=this,b=c.get("middleAngle"),d=iChart.quadrantd(b);return function(e,f){var g=c.p2p(c.x,c.y,b,0.6);return{left:(d>=2&&d<=3)?(g.x-e):g.x,top:d>=3?(g.y-f):g.y}}},doConfig:function(){iChart.Sector3D.superclass.doConfig.call(this);var i=this._(),j=i.get("counterclockwise"),c=i.get("middleAngle");i.a=i.get("semi_major_axis");i.b=i.get("semi_minor_axis");i.h=i.get("cylinder_height");iChart.Assert.isTrue(i.a*i.b>=0,"major&minor");var g=2*Math.PI,b=function(m){while(m<0){m+=g}return Math.abs(iChart.atan2Radian(0,0,i.a*Math.cos(m),j?(-i.b*Math.sin(m)):(i.b*Math.sin(m))))},h=i.pushIf("increment",iChart.lowTo(5,i.a/10));i.sA=b.call(i,i.get("startAngle"));i.eA=b.call(i,i.get("endAngle"));i.mA=b.call(i,c);i.push("inc_x",h*Math.cos(g-i.mA));i.push("inc_y",h*Math.sin(g-i.mA));h*=2;if(i.get("label")){if(i.get("mini_label")){var k=i.p2p(i.x,i.y,c,0.5);i.doText(i,k.x,k.y)}else{var d=iChart.quadrantd(c),e=i.p2p(i.x,i.y,c,h/i.a+1),f=i.p2p(i.x,i.y,c,h*0.6/i.a+1),l=i.p2p(i.x,i.y,c,1);i.doLabel(i,l.x,l.y,d,[{x:l.x,y:l.y},{x:f.x,y:f.y},{x:e.x,y:e.y}],e.x,e.y,h*0.4)}}}});iChart.Pie=iChart.extend(iChart.Chart,{configure:function(){iChart.Pie.superclass.configure.call(this);this.type="pie";this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:false,intellectLayout:true,layout_distance:4,pop_animate:false,mutex:false,increment:undefined,sub_option:{label:{}}});
this.registerEvent("bound","rebound");this.ILLUSIVE_COO=true},toggle:function(b){this.sectors[b||0].toggle()},bound:function(b){this.sectors[b||0].bound()},rebound:function(b){this.sectors[b||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(e,g,c){var b=0,f=c.oA;c.sectors.each(function(h,d){b=c.animationArithmetic(e,0,h.get("totalAngle"),g);h.push("startAngle",f);h.push("endAngle",f+b);f+=b;if(!c.is3D()){h.drawSector()}});if(c.is3D()){c.proxy.drawSector()}},parse:function(b){b.data.each(function(e,c){b.doParse(b,e,c)},b);b.localizer(b)},doParse:function(b,f,e){var c=f.name+" "+b.getPercent(f.value);b.doActing(b,f,null,e,c);b.push("sub_option.id",e);if(b.get("sub_option.label")){b.push("sub_option.label.text",c)}b.push("sub_option.listeners.changed",function(h,d,g){b.fireEvent(b,d?"bound":"rebound",[b,h.get("name")])});b.sectors.push(b.doSector(b,f))},doSector:function(b){return new a[b.sub](b.get("sub_option"),b)},dolayout:function(e,b,h,c,g,f){if(e.is3D()?iChart.inEllipse(e.get(e.X)-b,e.topY-h,e.a,e.b):iChart.distanceP2P(e.get(e.X),e.topY,b,h)<e.r){h=e.topY-h;c.push("labelx",e.get(e.X)+(Math.sqrt(e.r*e.r-h*h)*2+g)*(f==0||f==3?1:-1));c.localizer(c)}},localizer:function(e){if(e.get("intellectLayout")){var g=[],c=[],h=e.get("layout_distance"),f,b,i;e.sectors.each(function(j,d){if(j.isLabel()){g.push(j.label)}});g.sor(function(j,d){return Math.abs(Math.sin(j.get("angle")))-Math.abs(Math.sin(d.get("angle")))>0});g.each(function(d){c.each(function(j){b=j.labelx,i=j.labely;
if((d.labely<=i&&(i-d.labely-1)<d.get(e.H))||(d.labely>i&&(d.labely-i-1)<j.get(e.H))){if((d.labelx<b&&(b-d.labelx)<d.get(e.W))||(d.labelx>b&&(d.labelx-b)<j.get(e.W))){f=d.get("quadrantd");d.push("labely",(d.get("labely")+i-d.labely)+(d.get(e.H)+h)*(f>1?-1:1));d.localizer(d);e.dolayout(e,d.get("labelx"),d.get("labely")+d.get(e.H)/2*(f<2?-1:1),d,h,f)}}},e);c.push(d)})}},doConfig:function(){iChart.Pie.superclass.doConfig.call(this);var j=this._(),b=j.get("radius"),e=j.get("sub_option.label")?0.35:0.44,g=Math.PI*2;j.sub=j.is3D()?"Sector3D":"Sector2D";j.sectors=[];j.sectors.zIndex=j.get("z_index");j.components.push(j.sectors);j.oA=iChart.angle2Radian(j.get("offset_angle"))%g;if(j.is3D()){e+=0.06}var h=j.data.length,i=iChart.angle2Radian(iChart.between(0,90,j.get("separate_angle"))),k=g-i,i=i/h,c=j.oA+i,d=c;j.data.each(function(l,f){c+=(l.value/j.total)*k;if(f==(h-1)){c=g+j.oA}l.startAngle=d;l.endAngle=c;l.totalAngle=c-d;l.middleAngle=(d+c)/2;d=c+i},j);j.r=b=iChart.parsePercent(b,Math.floor(j.get("minDistance")*e));j.topY=j.originXY(j,[b+j.get("l_originx"),j.get("r_originx")-b,j.get("centerx")],[j.get("centery")]).y;iChart.apply(j.get("sub_option"),iChart.clone([j.X,j.Y,"bound_event","mutex","increment"],j.options))}});iChart.Pie2D=iChart.extend(iChart.Pie,{configure:function(){iChart.Pie2D.superclass.configure.call(this);this.type="pie2d"},doConfig:function(){iChart.Pie2D.superclass.doConfig.call(this);var b=this._();b.push("sub_option.radius",b.r);b.parse(b)}});iChart.Pie3D=iChart.extend(iChart.Pie,{configure:function(){iChart.Pie3D.superclass.configure.apply(this,arguments);
this.type="pie3d";this.dimension=iChart._3D;this.set({zRotate:45,yHeight:30})},doSector:function(b,e){b.push("sub_option.cylinder_height",(e.cylinder_height?e.cylinder_height*Math.cos(iChart.angle2Radian(b.get("zRotate"))):b.get("cylinder_height")));var c=new a[b.sub](b.get("sub_option"),b);c.proxy=true;return c},doConfig:function(){iChart.Pie3D.superclass.doConfig.call(this);var m=this._(),j=m.get("zRotate");m.push("zRotate",iChart.between(0,90,90-j));m.push("cylinder_height",m.get("yHeight")*Math.cos(iChart.angle2Radian(j)));m.a=m.push("sub_option.semi_major_axis",m.r);m.b=m.push("sub_option.semi_minor_axis",m.r*j/90);m.topY=m.push("sub_option.originy",m.get(m.Y)-m.get("yHeight")/2);m.parse(m);var f,l,k=[],i=m.get("counterclockwise"),p=function(d,c){return 1+Math.sin(c?(d+Math.PI):d)},n="startAngle",h="endAngle",b,o,g;lay=function(q,c,e,d){b=iChart.quadrantd(c);if(q&&(b==0||b==3)||(!q&&(b==2||b==1))){f.push({g:c,z:c==e,x:d.x,y:d.y,a:d.a,b:d.b,color:iChart.dark(d.get("background_color")),h:d.h,F:d})}};m.proxy=new iChart.Custom({z_index:m.get("z_index")+1,drawFn:function(){this.drawSector();k=[];m.sectors.each(function(c){if(c.get("label")){if(c.expanded){k.push(c.label)}else{c.label.draw()}}});k.each(function(c){c.draw()})}});m.proxy.drawSector=function(){m.sectors.each(function(d,c){m.T.ellipse(d.x,d.y+d.h,d.a,d.b,d.get(n),d.get(h),0,d.get("border.enable"),d.get("border.width"),d.get("border.color"),d.get("shadow"),i,true)},m);f=[];l=[];m.sectors.each(function(c){lay(i,c.get(n),c.get(h),c);
lay(!i,c.get(h),c.get(n),c);l=l.concat(iChart.visible(c.get(n),c.get(h),c))},m);f.sor(function(e,d){var c=p(e.g)-p(d.g);return c==0?e.z:c>0});f.each(function(d,c){m.T.sector3D.layerDraw.call(m.T,d.x,d.y,d.a+0.5,d.b+0.5,i,d.h,d.g,d.color)},m);if(!m.processAnimation){l.sor(function(d,c){return p((d.s+d.e)/2,1)-p((c.s+c.e)/2,1)<0})}l.each(function(d,c){m.T.sector3D.sPaint.call(m.T,d.f.x,d.f.y,d.f.a,d.f.b,d.s,d.e,i,d.f.h,d.f.get("f_color"))},m);m.sectors.each(function(d,c){m.T.ellipse(d.x,d.y,d.a,d.b,d.get(n),d.get(h),d.get("f_color"),d.get("border.enable"),d.get("border.width"),d.get("border.color"),false,false,true)},m)};m.components.push(m.proxy)}});iChart.Donut2D=iChart.extend(iChart.Pie,{configure:function(){iChart.Donut2D.superclass.configure.call(this);this.type="donut2d";this.set({donutwidth:0.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){iChart.Donut2D.superclass.doConfig.call(this);var b=this._(),e="donutwidth",c=b.r;b.push("sub_option.radius",c);if(b.get(e)>0){if(b.get(e)<1){b.push(e,Math.floor(c*b.get(e)))}else{if(b.get(e)>=c){b.push(e,0)}}b.push("sub_option.donutwidth",b.get(e))}if(iChart.isString(b.get("center"))){b.push("center",iChart.applyIf({text:b.get("center")},b.default_.center))}if(b.get("center.text")!=""){b.push("center.originx",b.get(b.X));b.push("center.originy",b.get(b.Y));b.push("center.textBaseline","middle");b.center=new iChart.Text(b.get("center"),b);b.components.push(b.center)}b.parse(b)}});iChart.Column=iChart.extend(iChart.Chart,{configure:function(b){iChart.Column.superclass.configure.call(this);
this.type="column";this.set({coordinate:{},column_width:undefined,column_space:undefined,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent()},doAnimation:function(c,f,b){var e;b.labels.each(function(d){d.draw()});b.rectangles.each(function(d){e=Math.ceil(b.animationArithmetic(c,0,d.height,f));d.push(b.Y,d.y+(d.height-e));d.push(b.H,e);d.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(c,f,d,b,e){c.labels.push(new iChart.Text(iChart.apply(c.get("label"),{id:f,text:d,originx:b,originy:e}),c))},doParse:function(b,f,c,e){b.doActing(b,f,e,c)},engine:function(j){var d=j.get("column_width"),l=j.get("column_space"),c=j.coo.getScale(j.get("scaleAlign")),i=j.coo.get(j.H),e=d/2,b=d*(j.get("group_fator")||0),k=j.dataType!="complex"?(d+l):(j.data.length*d+l+(j.is3D()?(j.data.length-1)*b:0)),h=j.coo.get(j.Y)+i,f=h-c.basic*i-(j.is3D()?(j.get("zHeight")*(j.get("bottom_scale")-1)/2*j.get("yAngle_")):0),g=l+j.coo.get("x_start");h=h+j.get("text_space")+j.coo.get("axis.width")[2];j.doEngine(j,d,l,c,i,e,b,k,g,f,h)},doConfig:function(){iChart.Column.superclass.doConfig.call(this);var b=this._(),e="column_width",d="z_index";b.sub=b.is3D()?"Rectangle3D":"Rectangle2D";b.rectangles=[];b.labels=[];b.components.push(b.labels);b.components.push(b.rectangles);b.coo=iChart.Coordinate.coordinate_.call(b,function(){var g=b.data.length,f=b.get("coordinate.valid_width"),i,c,h;if(b.dataType=="complex"){h=b.get("labels").length;g=h*g+(b.is3D()?(g-1)*h*b.get("group_fator"):0);
i=Math.floor(f/(h+1+g));c=b.pushIf(e,i);h+=1}else{if(b.dataType=="stacked"){g=b.get("labels").length}i=Math.floor(f*2/(g*3+1));c=b.pushIf(e,i);h=g+1}if(c*g>f){c=b.push(e,i)}b.push("column_space",(f-c*g)/h);if(b.is3D()){b.push("zHeight",b.get(e)*b.get("zScale"));b.push("sub_option.zHeight",b.get("zHeight"));b.push("sub_option.xAngle_",b.get("xAngle_"));b.push("sub_option.yAngle_",b.get("yAngle_"))}});b.rectangles.zIndex=b.get(d);b.labels.zIndex=b.get(d)+1;b.push("sub_option.width",b.get(e))}});iChart.Column2D=iChart.extend(iChart.Column,{configure:function(){iChart.Column2D.superclass.configure.call(this);this.type="column2d"},doEngine:function(l,d,n,c,k,e,b,m,i,g,j){var f;l.data.each(function(o,h){f=(o.value-c.start)*k/c.distance;l.doParse(l,o,h,{id:h,originx:i+h*m,originy:g-(f>0?f:0),height:Math.abs(f)});l.rectangles.push(new a[l.sub](l.get("sub_option"),l));l.doLabel(l,h,o.name,i+m*h+e,j)},l)},doConfig:function(){iChart.Column2D.superclass.doConfig.call(this);this.engine(this)}});iChart.Column3D=iChart.extend(iChart.Column2D,{configure:function(){iChart.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=iChart._3D;this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){iChart.Column3D.superclass.doConfig.call(this)}});iChart.ColumnMulti2D=iChart.extend(iChart.Column,{configure:function(){iChart.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(l,d,n,c,k,e,b,m,i,g,j){var f;
l.columns.each(function(o,h){o.item.each(function(q,p){f=(q.value-c.start)*k/c.distance;l.doParse(l,q,p,{id:h+"_"+p,originx:i+p*(d+b)+h*m,originy:g-(f>0?f:0),height:Math.abs(f)});l.rectangles.push(new a[l.sub](l.get("sub_option"),l))},l);l.doLabel(l,h,o.name,i-n*0.5+(h+0.5)*m,j)},l)},doConfig:function(){iChart.ColumnMulti2D.superclass.doConfig.call(this);this.engine(this)}});iChart.ColumnMulti3D=iChart.extend(iChart.ColumnMulti2D,{configure:function(){iChart.ColumnMulti3D.superclass.configure.call(this);this.type="columnmulti3d";this.dataType="complex";this.dimension=iChart._3D;this.set({xAngle:60,yAngle:20,zScale:1,group_fator:0.3,bottom_scale:1.4})},doConfig:function(){iChart.ColumnMulti3D.superclass.doConfig.call(this)}});iChart.ColumnStacked2D=iChart.extend(iChart.Column,{configure:function(){iChart.ColumnStacked2D.superclass.configure.call(this);this.type="columnstacked2d";this.dataType="stacked";this.set({percent:false,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,e,t,d,n,f,b,r,k,j,l){var i,g,m,c=o.get("percent");o.columns.each(function(p,h){i=0;m=c?100/p.total:1;p.item.each(function(s,q){g=(s.value*m-d.start)*n/d.distance;s.total=p.total;o.doParse(o,s,q,{id:h+"_"+q,originx:k+h*r,originy:j-(g>0?g:0)-i,height:Math.abs(g)});i+=g;o.rectangles.push(new a[o.sub](o.get("sub_option"),o))},o);o.doLabel(o,h,p.name,k-t*0.5+(h+0.5)*r,l)},o)},doConfig:function(){iChart.ColumnStacked2D.superclass.doConfig.call(this);this.engine(this)}});iChart.ColumnStacked3D=iChart.extend(iChart.ColumnStacked2D,{configure:function(){iChart.ColumnStacked3D.superclass.configure.call(this);
this.type="columnstacked3d";this.dataType="stacked";this.dimension=iChart._3D;this.set({percent:false,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){iChart.ColumnStacked3D.superclass.doConfig.call(this)}});iChart.Bar=iChart.extend(iChart.Chart,{configure:function(){iChart.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:undefined,bar_space:undefined,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(e,c,b,d){this.labels.push(new iChart.Text(iChart.apply(this.get("label"),{id:e,text:c,textAlign:"right",textBaseline:"middle",originx:b,originy:d}),this))},doParse:function(b,f,c,e){b.doActing(b,f,e,c)},engine:function(i){var e=i.get("bar_height"),k=i.get("bar_space"),d=i.coo.getScale(i.get("scaleAlign")),c=i.coo.get(i.W),f=e/2,j=i.dataType!="complex"?e+k:i.data.length*e+k,g=i.coo.get(i.X)+d.basic*c,b=i.coo.get(i.X)-i.get("text_space")-i.coo.get("axis.width")[3],h=i.coo.get("y_start")+k;i.doEngine(i,e,k,d,c,f,j,g,b,h)},doAnimation:function(c,e,b){b.labels.each(function(d){d.draw()});b.rectangles.each(function(d){d.push(b.W,Math.ceil(b.animationArithmetic(c,0,d.width,e)));d.drawRectangle()})},doConfig:function(){iChart.Bar.superclass.doConfig.call(this);var g=this._(),d="bar_height",j="z_index";g.coo=iChart.Coordinate.coordinate_.call(g);g.rectangles=[];g.labels=[];g.rectangles.zIndex=g.get(j);
g.labels.zIndex=g.get(j)+1;g.components.push(g.labels);g.components.push(g.rectangles);var c=g.data.length,h=g.coo.get("valid_height"),e,f,i;if(g.dataType=="simple"){e=Math.floor(h*2/(c*3+1));f=g.pushIf(d,e);i=c+1}else{i=g.get("labels").length;c=i*c+(g.is3D()?(c-1)*i*g.get("group_fator"):0);e=Math.floor(h/(i+1+c));f=g.pushIf(d,e);i+=1}if(f*c>h){f=g.push(d,e)}g.push("bar_space",(h-f*c)/i);g.push("sub_option.height",f);g.push("sub_option.valueAlign",g.R);g.push("sub_option.tipAlign",g.R)}});iChart.Bar2D=iChart.extend(iChart.Bar,{configure:function(){iChart.Bar2D.superclass.configure.call(this);this.type="bar2d"},doEngine:function(j,e,l,d,c,f,k,g,b,i){var h;j.data.each(function(n,m){h=(n.value-d.start)*c/d.distance;j.doParse(j,n,m,{id:m,originy:i+m*k,width:Math.abs(h),originx:g+(h>0?0:-Math.abs(h))});j.rectangles.push(new iChart.Rectangle2D(j.get("sub_option"),j));j.doLabel(m,n.name,b,i+m*k+f)},j)},doConfig:function(){iChart.Bar2D.superclass.doConfig.call(this);this.engine(this)}});iChart.BarMulti2D=iChart.extend(iChart.Bar,{configure:function(){iChart.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(j,e,l,d,c,f,k,g,b,i){var h;j.columns.each(function(n,m){n.item.each(function(p,o){h=(p.value-d.start)*c/d.distance;j.doParse(j,p,o,{id:m+"_"+o,originy:i+o*e+m*k,width:Math.abs(h),originx:g+(h>0?0:-Math.abs(h))});j.rectangles.push(new iChart.Rectangle2D(j.get("sub_option"),j))},j);j.doLabel(m,n.name,b,i-l*0.5+(m+0.5)*k)
},j)},doConfig:function(){iChart.BarMulti2D.superclass.doConfig.call(this);this.engine(this)}});iChart.LineSegment=iChart.extend(iChart.Component,{configure:function(){iChart.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({brushsize:1,intersection:true,label:{},sign:"round",area_color:null,hollow:true,hollow_inside:true,hollow_color:"#FEFEFE",smooth:false,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:false,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:false,tip_offset:2,event_range_y:0});this.registerEvent("parseText");this.tip=null},drawSegment:function(){var d=this._(),f=d.get("points"),c=d.get("f_color"),e=d.get("brushsize");d.polygons.each(function(b){d.T.polygon.apply(d.T,b)});d.T.shadowOn(d.get("shadow"));d.lines.each(function(b){d.T.lineArray.apply(d.T,b)});d.intersections.each(function(b){if(d.sign_plugin){d.sign_plugin_fn.apply(d,b)}else{d.T.round0.apply(d.T,b)}});if(d.get("shadow")){d.T.shadowOff()}},doDraw:function(b){b.drawSegment();if(b.get("label")){b.labels.each(function(c){c.draw()})}},isEventValid:function(){},tipInvoke:function(){var b=this.x,f=this.y,e=this.get("tip_offset"),d=this.get("point_size")+e,c=this;return function(j,n,g){var i=g.left,k=g.top;i=((c.tipPosition<3&&(i-j-b-e>0))||(c.tipPosition>2&&(i-j-b-e<0)))?i-(j+e):i+e;k=c.tipPosition%2==0?k+d:k-n-d;return{left:i,top:k}}},PP:function(d,g,c,f,b,e){if(d.get("area")){d.polygons.push([d.get("area_color")||d.get("light_color2"),0,d.get("brushsize"),0,0,d.get("area_opacity"),d.get("smooth")?g:[{x:c,y:f}].concat(g.concat([{x:b,y:e}])),d.get("smooth"),d.get("smoothing")||1.5,[{x:c,y:f},{x:b,y:e}]])
}},parse:function(u){u.polygons=[];u.lines=[];u.intersections=[];u.labels=[];var d=u.get("points"),t=u.get("intersection"),q=!!u.get("label"),i=[],m=false,v=u.get("smooth"),e=u.get("smoothing")||1.5,r=u.get("f_color"),l=u.get("brushsize"),c=u.get("point_size");if(t){var o=u.getPlugin("sign"),n=r,k=u.get("hollow_color");u.sign_plugin=iChart.isFunction(o);u.sign_plugin_fn=o;if(u.get("hollow_inside")){n=k;k=r}}d.each(function(b){b.x_=b.x;b.y_=b.y;if(!b.ignored&&q){u.push("label.originx",b.x);u.push("label.originy",b.y-c/2-1);u.push("label.text",u.fireString(u,"parseText",[u,b.value],b.value));iChart.applyIf(u.get("label"),{textBaseline:"bottom",color:u.get("f_color")});u.labels.push(new iChart.Text(u.get("label"),u))}if(b.ignored&&m){u.lines.push([i,l,r,v,e]);u.PP(u,i,i[0].x,u.y,i[i.length-1].x,u.y);i=[];m=false}else{if(!b.ignored){i.push(b);m=true}}if(t&&!b.ignored){u.intersections.push(u.sign_plugin?[u.T,u.get("sign"),b,c,n,k]:u.get("hollow")?[b,c/2-l+1,n,l+1,k]:[b,c/2,n])}});if(i.length){u.lines.push([i,l,r,v,e]);u.PP(u,i,i[0].x,u.y,i[i.length-1].x,u.y)}},doConfig:function(){iChart.LineSegment.superclass.doConfig.call(this);iChart.Assert.isTrue(this.get("point_space")>0,"point_space");var q=this._(),d=q.get("point_size")*3/2,h=q.get("point_space"),e=q.get("event_range_y"),f=q.get("event_range_x"),j=q.get("tipInvokeHeap"),g=q.get("points"),m=q.get("name");q.parse(q);if(f<=0||f>h/2){f=q.push("event_range_x",h/2)}if(e==0){e=q.push("event_range_y",d/2)}if(q.get("tip.enable")){q.on("mouseover",function(r,p,k){j.push(q);
q.tipPosition=j.length}).on("mouseout",function(r,p,k){j.pop()});q.push("tip.invokeOffsetDynamic",true);q.tip=new iChart.Tip(q.get("tip"),q)}var n=q.get("coordinate"),i=q.get("limit_y"),l=q.get("keep_with_coordinate"),b=function(p,c,k){if(!p.ignored&&Math.abs(c-(p.x))<f&&(!i||(i&&Math.abs(k-(p.y))<e))){return true}return false},o=function(c){return{valid:true,name:m,value:g[c].value,text:g[c].text,top:g[c].y,left:g[c].x,i:c,hit:true}};q.isEventValid=function(p){if(n&&!n.isEventValid(p,n).valid){return{valid:false}}var k=Math.floor((p.x-q.x)/h);if(k<0||k>=(g.length-1)){k=iChart.between(0,g.length-1,k);if(b(g[k],p.x,p.y)){return o(k)}else{return{valid:l}}}for(var c=k;c<=k+1;c++){if(b(g[c],p.x,p.y)){return o(c)}}return{valid:l}}}});iChart.Line=iChart.extend(iChart.Chart,{configure:function(){iChart.Line.superclass.configure.call(this);this.type="line";this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:false},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:true,point_space:null,sub_option:{},legend:{sign:"bar"},label:{}});this.registerEvent("parsePoint")},getCoordinate:function(){return this.coo},doConfig:function(){iChart.Line.superclass.doConfig.call(this);var v=this._(),w=v.data.length==1;v.lines=[];v.lines.zIndex=v.get("z_index");v.components.push(v.lines);var j=v.pushIf("sub_option.keep_with_coordinate",w);if(v.get("crosshair.enable")){v.push("crosshair.hcross",w);v.push("crosshair.invokeOffset",function(p,f){var k=v.lines[0].isEventValid(p);
return k.valid?k:j})}if(!v.Combination){v.push("coordinate.crosshair",v.get("crosshair"));v.pushIf("coordinate.scale",[{position:v.get("scaleAlign"),max_scale:v.get("maxValue")},{position:v.get("labelAlign"),start_scale:1,scale:1,end_scale:v.get("maxItemSize"),labels:v.get("labels"),label:v.get("label")}])}v.coo=iChart.Coordinate.coordinate_.call(v);if(v.Combination){v.coo.push("crosshair",v.get("crosshair"));v.coo.doCrosshair(v.coo)}var t=v.coo.get("valid_width"),l=v.coo.get("valid_height"),n=t/(v.get("maxItemSize")-1),c=v.get("point_space");if(v.get("proportional_spacing")){if(c&&c<n){t=(v.get("maxItemSize")-1)*c}else{v.push("point_space",n)}}v.push("sub_option.width",t);v.push("sub_option.height",l);v.push("sub_option.originx",v.coo.get("x_start")+(v.coo.get("valid_width")-t)/2);v.push("sub_option.originy",v.coo.get(v.Y)+v.coo.get(v.H));if(v.get("tip.enable")){if(iChart.isFunction(v.get("tipMocker"))){v.push("sub_option.tip.enable",false);v.push("tip.invokeOffsetDynamic",true);var i,q=v.coo.get(v.X),o=v.coo.get(v.Y),u=v.coo.get(v.H),m=v.get("tipMockerOffset"),h,b,g;m=iChart.isNumber(m)?(m<0?0:(m>1?1:m)):null;v.push("tip.invokeOffset",function(k,p,f){if(m!=null){f.top=o+(u-p)*m}else{f.top=f.maxTop-(f.maxTop-f.minTop)/3-p;if(p>u||o>f.top){f.top=o}}return{left:(f.left-k-q>5)?f.left-k-5:f.left+5,top:f.top}});var e=v.get("tip.listeners.parseText");if(e){delete v.get("tip.listeners").parseText}var d=new iChart.Custom({eventValid:function(f){b=v.lines[0].isEventValid(f);b.hit=h!=b.i;
if(b.valid){h=b.i;i=[];v.lines.each(function(k,p){g=k.isEventValid(f);if(p==0){b.minTop=b.maxTop=g.top}else{b.minTop=Math.min(b.minTop,g.top);b.maxTop=Math.max(b.maxTop,g.top)}i.push(e?e(null,g.name,g.value,g.text,g.i):(g.name+" "+g.value))});b.text=v.get("tipMocker").call(v,i,b.i)||"tipMocker not return"}return b.valid?b:false}});new iChart.Tip(v.get("tip"),d);v.components.push(d)}}iChart.applyIf(v.get("sub_option"),iChart.clone(["area_opacity"],v.options))}});iChart.LineBasic2D=iChart.extend(iChart.Line,{configure:function(){iChart.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(c,e,b){b.lines.each(function(d){d.get("points").each(function(f){f.y=d.y-Math.ceil(b.animationArithmetic(c,0,d.y-f.y_,e))});d.drawSegment()})},doConfig:function(){iChart.LineBasic2D.superclass.doConfig.call(this);var k=this._();var f,j=k.coo.get("valid_height"),d=k.get("point_space"),i,h,g,e=k.get("sub_option.originx"),c,b;k.push("sub_option.tip.showType","follow");k.push("sub_option.coordinate",k.coo);k.push("sub_option.tipInvokeHeap",k.tipInvokeHeap);k.push("sub_option.point_space",d);k.data.each(function(m,l){f=k.coo.getScale(m.scaleAlign||k.get("scaleAlign"));c=k.get("sub_option.originy")-f.basic*j;i=[];m.value.each(function(n,o){h=d*o;g=(n-f.start)*j/f.distance;b={x:e+h,y:c-g,value:n,text:m.name+" "+n};iChart.merge(b,k.fireEvent(k,"parsePoint",[m,n,h,g,o]));i.push(b)},k);iChart.merge(k.get("sub_option"),m);k.push("sub_option.points",i);
k.push("sub_option.brushsize",m.linewidth||m.line_width||1);k.lines.push(new iChart.LineSegment(k.get("sub_option"),k))},this)}});iChart.Area2D=iChart.extend(iChart.LineBasic2D,{configure:function(){iChart.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("sub_option.area",true);iChart.Area2D.superclass.doConfig.call(this)}})})(iChart);